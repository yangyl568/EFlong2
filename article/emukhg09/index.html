<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.22" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.144" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"bibeiskill","image":[""],"dateModified":"2025-04-29T08:25:04.000Z","author":[]}</script><meta property="og:url" content="https://yangyl568.github.io/EFlong2/EFlong2/article/emukhg09/"><meta property="og:site_name" content="逍遥生-前端笔记"><meta property="og:title" content="bibeiskill"><meta property="og:description" content="事件委托 对象操作 实现 new 实例 InstanceOf call() apply() bind() 浅拷贝 深拷贝 封装继承 类 继承 ES6 class 原型链继承:主要通过子类 prototype 指向父类实例 缺点：子类之间会相互影响 构造函数继承: 在子类构造函数中执行父类构造函数并绑定子类 this 缺点：继承不了父类原型上的属性和方法..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-29T08:25:04.000Z"><meta property="article:modified_time" content="2025-04-29T08:25:04.000Z"><link rel="icon" href="/EFlong2/favicon.ico"><title>bibeiskill | 逍遥生-前端笔记</title><meta name="description" content="事件委托 对象操作 实现 new 实例 InstanceOf call() apply() bind() 浅拷贝 深拷贝 封装继承 类 继承 ES6 class 原型链继承:主要通过子类 prototype 指向父类实例 缺点：子类之间会相互影响 构造函数继承: 在子类构造函数中执行父类构造函数并绑定子类 this 缺点：继承不了父类原型上的属性和方法..."><link rel="preload" href="/EFlong2/assets/style-CfJm6DmB.css" as="style"><link rel="stylesheet" href="/EFlong2/assets/style-CfJm6DmB.css"><link rel="modulepreload" href="/EFlong2/assets/app-B8vNsW8O.js"><link rel="modulepreload" href="/EFlong2/assets/index.html-BQBHUjX4.js"><link rel="prefetch" href="/EFlong2/assets/index.html-zXWFOe0D.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Bw90F3yb.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BelW4ppt.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Ctuqa0sD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-FwogDzqX.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DR0e5At8.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BhMXZ9G5.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Bt7Tgj4T.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-QzaB5Vzc.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DduWtOQY.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BIGhJJUR.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DvZQTLsa.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-1qwQ9Pq7.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-D47R4Maf.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-C9M-wu3T.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CCfTEzkn.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BFYrFklv.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-iEsnvDzn.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-7VnUsEfY.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BYTB8H5S.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DvO-2b0D.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Ds2hR_Vn.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BiVxADXx.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CmYp8HsD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/404.html-BAkD-u4a.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-I0DX2ivS.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Cjv1ND6i.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-B9DnuIEN.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Bboz4EDh.js" as="script"><link rel="prefetch" href="/EFlong2/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/searchBox-default-BXpzQnZU.js" as="script"><link rel="prefetch" href="/EFlong2/assets/SearchBox-CnOaIucd.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-42b1b316><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c5a1a5dd></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-c5a1a5dd> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-42b1b316 data-v-b0eb646e><div class="vp-navbar" vp-navbar data-v-b0eb646e data-v-bafe8e2a><div class="wrapper" data-v-bafe8e2a><div class="container" data-v-bafe8e2a><div class="title" data-v-bafe8e2a><div class="vp-navbar-title" data-v-bafe8e2a data-v-a33a92d8><a class="vp-link no-icon link title" href="/EFlong2/" data-v-a33a92d8 data-v-ef7dc74f><!--[--><!--[--><!--]--><!----><span data-v-a33a92d8>逍遥生-前端笔记</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-bafe8e2a><div class="content-body" data-v-bafe8e2a><!--[--><!--]--><div class="vp-navbar-search search" data-v-bafe8e2a><div class="search-wrapper" data-v-921063b6><!----><div id="local-search" data-v-921063b6><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-921063b6><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-bafe8e2a data-v-78d99cd9><span id="main-nav-aria-label" class="visually-hidden" data-v-78d99cd9>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/EFlong2/" tabindex="0" data-v-78d99cd9 data-v-340c779d data-v-ef7dc74f><!--[--><!----><span data-v-340c779d>首页</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-78d99cd9 data-v-afaa7d71><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-afaa7d71><span class="text" data-v-afaa7d71><!----><!----><span data-v-afaa7d71>八股文</span><!----><span class="vpi-chevron-down text-icon" data-v-afaa7d71></span></span></button><div class="menu" data-v-afaa7d71><div class="vp-menu" data-v-afaa7d71 data-v-f95f3966><div class="items" data-v-f95f3966><!--[--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/6dcud4h6/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> CSS 必备知识点 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/gl0mmfkz/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> JavaScript <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/7vxts4zb/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 前端工程化 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/hhpphdcq/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 框架 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/r5cjcrbh/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> Node <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group active" data-v-78d99cd9 data-v-afaa7d71><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-afaa7d71><span class="text" data-v-afaa7d71><!----><!----><span data-v-afaa7d71>积累</span><!----><span class="vpi-chevron-down text-icon" data-v-afaa7d71></span></span></button><div class="menu" data-v-afaa7d71><div class="vp-menu" data-v-afaa7d71 data-v-f95f3966><div class="items" data-v-f95f3966><!--[--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link active" href="/EFlong2/article/emukhg09/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 必备技能 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/vphzbmae/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 扩展 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/4d19tfzr/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 问题收集 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/isdvu4i2/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> Vue3项目 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-bafe8e2a data-v-69743219><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-69743219 data-v-4cd26491 data-v-aef50a60><span class="check" data-v-aef50a60><span class="icon" data-v-aef50a60><!--[--><span class="vpi-sun sun" data-v-4cd26491></span><span class="vpi-moon moon" data-v-4cd26491></span><!--]--></span></span></button></div><!----><div class="vp-flyout vp-navbar-extra extra" data-v-bafe8e2a data-v-4a00eeb6 data-v-afaa7d71><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-afaa7d71><span class="vpi-more-horizontal icon" data-v-afaa7d71></span></button><div class="menu" data-v-afaa7d71><div class="vp-menu" data-v-afaa7d71 data-v-f95f3966><!----><!--[--><!--[--><!----><div class="group" data-v-4a00eeb6><div class="item appearance" data-v-4a00eeb6><p class="label" data-v-4a00eeb6>外观</p><div class="appearance-action" data-v-4a00eeb6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-4a00eeb6 data-v-4cd26491 data-v-aef50a60><span class="check" data-v-aef50a60><span class="icon" data-v-aef50a60><!--[--><span class="vpi-sun sun" data-v-4cd26491></span><span class="vpi-moon moon" data-v-4cd26491></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-bafe8e2a data-v-8d58f15b><span class="container" data-v-8d58f15b><span class="top" data-v-8d58f15b></span><span class="middle" data-v-8d58f15b></span><span class="bottom" data-v-8d58f15b></span></span></button></div></div></div></div><div class="divider" data-v-bafe8e2a><div class="divider-line" data-v-bafe8e2a></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-42b1b316 data-v-7090fa6d><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-7090fa6d><span class="vpi-align-left menu-icon" data-v-7090fa6d></span><span class="menu-text" data-v-7090fa6d>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-7090fa6d data-v-6f8484ca><button data-v-6f8484ca>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-42b1b316 data-v-c15d6dee><div class="vp-doc-container is-blog" data-v-c15d6dee data-v-acd573c9><!--[--><!--]--><div class="container" data-v-acd573c9><!----><div class="content" data-v-acd573c9><div class="content-container" data-v-acd573c9><!--[--><!--]--><main class="main" data-v-acd573c9><nav class="vp-breadcrumb" data-v-acd573c9 data-v-622aec34><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-622aec34><!--[--><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb" href="/EFlong2/" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-622aec34></span><meta property="name" content="首页" data-v-622aec34><meta property="position" content="1" data-v-622aec34></li><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb" href="/EFlong2/blog/" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-622aec34></span><meta property="name" content="博客" data-v-622aec34><meta property="position" content="2" data-v-622aec34></li><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb" href="/EFlong2/blog/categories/?id=6ff990" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->jilei<!--]--><!----></a><span class="vpi-chevron-right" data-v-622aec34></span><meta property="name" content="jilei" data-v-622aec34><meta property="position" content="3" data-v-622aec34></li><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb current" href="/EFlong2/article/emukhg09/" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->bibeiskill<!--]--><!----></a><!----><meta property="name" content="bibeiskill" data-v-622aec34><meta property="position" content="4" data-v-622aec34></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-fbd34026>bibeiskill <!----></h1><div class="vp-doc-meta" data-v-fbd34026><!--[--><!--]--><p class="reading-time" data-v-fbd34026><span class="vpi-books icon" data-v-fbd34026></span><span data-v-fbd34026>约 2281 字</span><span data-v-fbd34026>大约 8 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-fbd34026><span class="vpi-clock icon" data-v-fbd34026></span><span data-v-fbd34026>2025-04-24</span></p></div><!--]--><!--[--><!--]--><div class="_article_emukhg09_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-acd573c9><!--[--><!--]--><div data-v-acd573c9><h2 id="事件委托" tabindex="-1"><a class="header-anchor" href="#事件委托"><span>事件委托</span></a></h2><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// 2. 利用事件委托，意思就是 通过监听父元素来获取 子元素信息</span></span>
<span class="line"><span style="color:#CB7676;">let</span><span style="color:#BD976A;"> ulNode</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> document</span><span style="color:#666666;">.</span><span style="color:#80A665;">getElementById</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">ul</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">ulNode</span><span style="color:#666666;">.</span><span style="color:#80A665;">addEventListener</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">click</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">,</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // 严谨：确保点击得是 li 元素</span></span>
<span class="line"><span style="color:#4D9375;">  if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">.</span><span style="color:#BD976A;">tagName</span><span style="color:#CB7676;"> ===</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">LI</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">    // 获取索引：</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> liNodeList</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#80A665;">querySelectorAll</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">li</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 类数组</span></span>
<span class="line"><span style="color:#758575DD;">    // 类数组如果想要调用数组 indexOf 方法就得 通过 call 改变this到Array上，然后通过原型链去调用 Array 上得各种方法</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> index</span><span style="color:#666666;"> =</span><span style="color:#B8A965;"> Array</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#BD976A;">indexOf</span><span style="color:#666666;">.</span><span style="color:#80A665;">call</span><span style="color:#666666;">(</span><span style="color:#BD976A;">liNodeList</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> e</span><span style="color:#666666;">.</span><span style="color:#BD976A;">target</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">    console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">`</span><span style="color:#4D9375;">${</span><span style="color:#C98A7D;">e</span><span style="color:#666666;">.</span><span style="color:#C98A7D;">target</span><span style="color:#666666;">.</span><span style="color:#C98A7D;">innerHTML</span><span style="color:#4D9375;">}</span><span style="color:#C98A7D;">,索引为：</span><span style="color:#4D9375;">${</span><span style="color:#C98A7D;">index</span><span style="color:#4D9375;">}</span><span style="color:#C98A7D77;">`</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// 全局 禁用页面上得按钮</span></span>
<span class="line"><span style="color:#BD976A;">window</span><span style="color:#666666;">.</span><span style="color:#80A665;">addEventListener</span><span style="color:#666666;">(</span></span>
<span class="line"><span style="color:#C98A7D77;">  &quot;</span><span style="color:#C98A7D;">click</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#CB7676;">  function</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#80A665;">    alert</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">该按钮不能点击</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#758575DD;">    // e.stopPropagation()</span><span style="color:#758575DD;"> // 阻止捕获和冒泡阶段事件得进一步传播</span></span>
<span class="line"><span style="color:#BD976A;">    e</span><span style="color:#666666;">.</span><span style="color:#80A665;">preventDefault</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 阻止默认事件</span></span>
<span class="line"><span style="color:#666666;">  },</span></span>
<span class="line"><span style="color:#4D9375;">  true</span></span>
<span class="line"><span style="color:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="对象操作" tabindex="-1"><a class="header-anchor" href="#对象操作"><span>对象操作</span></a></h2><p>实现 new 实例</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> creatNew</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#666666;"> ...</span><span style="color:#BD976A;">args</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // 1、创建一个新对象 obj</span></span>
<span class="line"><span style="color:#758575DD;">  // 2、新对象的 proto 指向构造函数的 原型</span></span>
<span class="line"><span style="color:#758575DD;">  // 3、利用 apply改变对象 this 指向,得到结果 result</span></span>
<span class="line"><span style="color:#758575DD;">  // 4、判断result如果返回的是一个 对象那直接返回结果，否则 返回新对象obj</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> obj</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">create</span><span style="color:#666666;">(</span><span style="color:#CB7676;">null</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">  obj</span><span style="color:#666666;">.</span><span style="color:#B8A965;">__proto__</span><span style="color:#666666;"> =</span><span style="color:#B8A965;"> fn</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> result</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> fn</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> args</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#4D9375;">  if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">result</span><span style="color:#CB7676;"> instanceof</span><span style="color:#5DA994;"> Object</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    return</span><span style="color:#BD976A;"> result</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span><span style="color:#4D9375;"> else</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    return</span><span style="color:#BD976A;"> obj</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>InstanceOf</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> myInstanceOf</span><span style="color:#666666;">(</span><span style="color:#BD976A;">son</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> father</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  while</span><span style="color:#666666;"> (</span><span style="color:#4D9375;">true</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">    son</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> son</span><span style="color:#666666;">.</span><span style="color:#B8A965;">__proto__</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">son</span><span style="color:#666666;">)</span><span style="color:#4D9375;"> return</span><span style="color:#4D9375;"> false</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">son</span><span style="color:#CB7676;"> ===</span><span style="color:#B8A965;"> father</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">)</span><span style="color:#4D9375;"> return</span><span style="color:#BD976A;"> ture</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#80A665;">myInstanceOf</span><span style="color:#666666;">([],</span><span style="color:#BD976A;"> Array</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>call()</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#B8A965;">Function</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">myApply</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#666666;"> ...</span><span style="color:#BD976A;">args</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // 1、改变 this 指向</span></span>
<span class="line"><span style="color:#BD976A;">  context</span><span style="color:#666666;">.</span><span style="color:#BD976A;">fn</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#758575DD;">  // 2、调用函数</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> result</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> context</span><span style="color:#666666;">.</span><span style="color:#80A665;">fn</span><span style="color:#666666;">(...</span><span style="color:#BD976A;">args</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">  delete</span><span style="color:#BD976A;"> context</span><span style="color:#666666;">.</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> result</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>apply()</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#B8A965;">Function</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">myApply</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> args</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // 1、改变 this 指向</span></span>
<span class="line"><span style="color:#BD976A;">  context</span><span style="color:#666666;">.</span><span style="color:#BD976A;">fn</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#758575DD;">  // 2、调用函数</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> result</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> context</span><span style="color:#666666;">.</span><span style="color:#80A665;">fn</span><span style="color:#666666;">(...</span><span style="color:#BD976A;">args</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">  delete</span><span style="color:#BD976A;"> context</span><span style="color:#666666;">.</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> result</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bind()</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#B8A965;">Function</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">myBind</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> args1</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#666666;"> (...</span><span style="color:#BD976A;">args2</span><span style="color:#666666;">)</span><span style="color:#666666;"> =&gt;</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#BD976A;">context</span><span style="color:#666666;">,</span><span style="color:#666666;"> [...</span><span style="color:#BD976A;">args1</span><span style="color:#666666;">,</span><span style="color:#666666;"> ...</span><span style="color:#BD976A;">args2</span><span style="color:#666666;">]);</span></span>
<span class="line"><span style="color:#666666;">};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>浅拷贝</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;">、</span><span style="color:#BD976A;">展开运算符</span></span>
<span class="line"><span style="color:#CB7676;">var</span><span style="color:#BD976A;"> newObj</span><span style="color:#666666;"> =</span><span style="color:#666666;"> {...</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;">、</span><span style="color:#BD976A;">assign</span></span>
<span class="line"><span style="color:#BD976A;">Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">assign</span><span style="color:#666666;">({},</span><span style="color:#BD976A;"> obj</span><span style="color:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4C9A91;">3</span><span style="color:#DBD7CAEE;">、</span><span style="color:#BD976A;">循环</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> copy</span><span style="color:#666666;">(</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> result</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Array</span><span style="color:#666666;">.</span><span style="color:#80A665;">isArray</span><span style="color:#666666;">(</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">)</span><span style="color:#CB7676;"> ?</span><span style="color:#666666;"> []</span><span style="color:#CB7676;"> :</span><span style="color:#666666;"> {}</span></span>
<span class="line"><span style="color:#BD976A;">  Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">keys</span><span style="color:#666666;">(</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">).</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">(</span><span style="color:#BD976A;">key</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">    result</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> obj</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]</span></span>
<span class="line"><span style="color:#666666;">  })</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> result</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>深拷贝</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;">、</span><span style="color:#BD976A;">JSON</span><span style="color:#666666;">.</span><span style="color:#80A665;">parse</span><span style="color:#666666;">(</span><span style="color:#BD976A;">JSON</span><span style="color:#666666;">.</span><span style="color:#80A665;">stringify</span><span style="color:#666666;">(</span><span style="color:#BD976A;">obj</span><span style="color:#666666;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;">、</span><span style="color:#BD976A;">利用遍历对象</span><span style="color:#CB7676;"> +</span><span style="color:#BD976A;"> 递归对象</span></span>
<span class="line"><span style="color:#4D9375;">export</span><span style="color:#CB7676;"> function</span><span style="color:#80A665;"> deepClone</span><span style="color:#666666;">(</span><span style="color:#BD976A;">source</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  if</span><span style="color:#666666;"> (</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">source</span><span style="color:#CB7676;"> &amp;&amp;</span><span style="color:#CB7676;"> typeof</span><span style="color:#BD976A;"> source</span><span style="color:#CB7676;"> !==</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">object</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    throw</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Error</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">error arguments</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">,</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">deepClone</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#CB7676;">  const</span><span style="color:#BD976A;"> targetObj</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> source</span><span style="color:#666666;">.</span><span style="color:#B8A965;">constructor</span><span style="color:#CB7676;"> ===</span><span style="color:#BD976A;"> Array</span><span style="color:#CB7676;"> ?</span><span style="color:#666666;"> []</span><span style="color:#CB7676;"> :</span><span style="color:#666666;"> {};</span></span>
<span class="line"><span style="color:#BD976A;">  Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">keys</span><span style="color:#666666;">(</span><span style="color:#BD976A;">source</span><span style="color:#666666;">).</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">((</span><span style="color:#BD976A;">key</span><span style="color:#666666;">)</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">source</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]</span><span style="color:#CB7676;"> &amp;&amp;</span><span style="color:#CB7676;"> typeof</span><span style="color:#BD976A;"> source</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]</span><span style="color:#CB7676;"> ===</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">object</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      targetObj</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]</span><span style="color:#666666;"> =</span><span style="color:#80A665;"> deepClone</span><span style="color:#666666;">(</span><span style="color:#BD976A;">source</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]);</span></span>
<span class="line"><span style="color:#666666;">    }</span><span style="color:#4D9375;"> else</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      targetObj</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">]</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> source</span><span style="color:#666666;">[</span><span style="color:#BD976A;">key</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  });</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> targetObj</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>封装继承</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// ES5</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">n</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  var</span><span style="color:#BD976A;"> name</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> n</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">  function</span><span style="color:#80A665;"> a</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    return</span><span style="color:#BD976A;"> name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">  function</span><span style="color:#80A665;"> b</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    return</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">我的名字</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#CB7676;"> +</span><span style="color:#BD976A;"> name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#B8A965;">    a</span><span style="color:#666666;">:</span><span style="color:#BD976A;"> a</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#B8A965;">    b</span><span style="color:#666666;">:</span><span style="color:#BD976A;"> b</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#666666;">  };</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">var</span><span style="color:#BD976A;"> xieN</span><span style="color:#666666;"> =</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">龙哥</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">xieN</span><span style="color:#666666;">.</span><span style="color:#80A665;">a</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">xieN</span><span style="color:#666666;">.</span><span style="color:#80A665;">b</span><span style="color:#666666;">());</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>类</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">/************ ES5 定义类 ******************/</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> User</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">  this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">// 添加函数</span></span>
<span class="line"><span style="color:#B8A965;">User</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">showUser</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">  console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#758575DD;">// 使用</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> user</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> User</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">my.yang</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">user</span><span style="color:#666666;">.</span><span style="color:#80A665;">showUser</span><span style="color:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/************ ES6 定义类 ******************/</span></span>
<span class="line"><span style="color:#CB7676;">class</span><span style="color:#5DA994;"> Person</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // 其实就是在 Person 的 prototype 上添加了属性和方法</span></span>
<span class="line"><span style="color:#CB7676;">  constructor</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#80A665;">  showName</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">    console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> person</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Person</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">My.Yang</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">person</span><span style="color:#666666;">.</span><span style="color:#80A665;">showName</span><span style="color:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="继承" tabindex="-1"><a class="header-anchor" href="#继承"><span>继承</span></a></h3><p>ES6 class</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">class</span><span style="color:#5DA994;"> ColorPoint</span><span style="color:#CB7676;"> extends</span><span style="color:#80A665;"> Point</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  constructor</span><span style="color:#666666;">(</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> y</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> color</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">    super</span><span style="color:#666666;">(</span><span style="color:#BD976A;">x</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> y</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 调用父类的constructor(x, y)</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">color</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> color</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#80A665;">  toString</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    return</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">color</span><span style="color:#CB7676;"> +</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#CB7676;"> +</span><span style="color:#C99076;"> super</span><span style="color:#666666;">.</span><span style="color:#80A665;">toString</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 调用父类的toString()</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原型链继承:主要通过子类 prototype 指向父类实例</p><p>缺点：子类之间会相互影响</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// 父类</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">  this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">我是小样</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">// 给父类添加方法</span></span>
<span class="line"><span style="color:#B8A965;">Parent</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#758575DD;">// 子类</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">()</span><span style="color:#666666;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B8A965;">Child</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 直接把父类实例赋给 子类的 原型对象</span></span>
<span class="line"><span style="color:#B8A965;">Child</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#B8A965;">constructor</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Child</span><span style="color:#666666;">;</span><span style="color:#758575DD;"> // 根据原型链的规则,顺便绑定一下constructor, 这一步不影响继承, 只是在用到constructor时会需要</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> child</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#BD976A;">child</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">;</span><span style="color:#758575DD;"> // 我是小样</span></span>
<span class="line"><span style="color:#BD976A;">child</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 我是小样</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>构造函数继承: 在子类构造函数中执行父类构造函数并绑定子类 this</p><p>缺点：继承不了父类原型上的属性和方法</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">  this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#666666;"> [</span><span style="color:#BD976A;">name</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#B8A965;">Parent</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">  Parent</span><span style="color:#666666;">.</span><span style="color:#80A665;">call</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">,</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">参数1</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 执行父类构造方法并绑定子类的this, 使得父类中的属性能够赋到子类的this上</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">//测试</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> child1</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> child2</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#BD976A;">child1</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">]</span><span style="color:#666666;"> =</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">foo</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">child1</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // [&#39;foo&#39;]</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">child2</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // [&#39;zhangsan&#39;]</span></span>
<span class="line"><span style="color:#BD976A;">child2</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 报错,找不到getName(), 构造函数继承的方式 继承不到父类原型上的属性和方法</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组合式继承 就是把上面俩个整合：prototype + 构造函数调用父类 CALL</p><p>缺点：子类实例执行了两次构造函数【Parent.call() 和 new Parent()】</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">  this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#666666;"> [</span><span style="color:#BD976A;">name</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#B8A965;">Parent</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">  Parent</span><span style="color:#666666;">.</span><span style="color:#80A665;">call</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">,</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">参数</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 改变 Parent this 指向，并带参数</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#B8A965;">Child</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 把父类实例 赋值给 子类原型</span></span>
<span class="line"><span style="color:#B8A965;">Child</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#B8A965;">constructor</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Child</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">var</span><span style="color:#BD976A;"> child</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#CB7676;">var</span><span style="color:#BD976A;"> child2</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#BD976A;">child1</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">yang</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">child1</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // yang</span></span>
<span class="line"><span style="color:#BD976A;">console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#BD976A;">child2</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 参数</span></span>
<span class="line"><span style="color:#BD976A;">child2</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 参数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>寄生式组合继承【最终版】</p><p>主要是 优化了原型链继承方式</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">(</span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">  this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;"> =</span><span style="color:#666666;"> [</span><span style="color:#BD976A;">name</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#B8A965;">Parent</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">name</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">};</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // 构造函数继承</span></span>
<span class="line"><span style="color:#BD976A;">  Parent</span><span style="color:#666666;">.</span><span style="color:#80A665;">call</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">,</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">zhangsan</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">//原型链继承</span></span>
<span class="line"><span style="color:#758575DD;">// Child.prototype = new Parent()</span></span>
<span class="line"><span style="color:#B8A965;">Child</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">create</span><span style="color:#666666;">(</span><span style="color:#B8A965;">Parent</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> //将`指向父类实例`改为`指向父类原型`</span></span>
<span class="line"><span style="color:#B8A965;">Child</span><span style="color:#666666;">.</span><span style="color:#B8A965;">prototype</span><span style="color:#666666;">.</span><span style="color:#B8A965;">constructor</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Child</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">//测试</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> child</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Child</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> parent</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Parent</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#BD976A;">child</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // [&#39;zhangsan&#39;]</span></span>
<span class="line"><span style="color:#BD976A;">parent</span><span style="color:#666666;">.</span><span style="color:#80A665;">getName</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 报错, 找不到getName()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数组操作" tabindex="-1"><a class="header-anchor" href="#数组操作"><span>数组操作</span></a></h2><p>排平-扁平化</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> * 最简单方式 利用循环递归</span></span>
<span class="line"><span style="color:#758575DD;"> * 循环遍历 判断当前是否 数组，是的话 递归下一层，拼接到新数组中，否则直接 push 到新数组中</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> flatten1</span><span style="color:#666666;">(</span><span style="color:#BD976A;">arr</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> result</span><span style="color:#666666;"> =</span><span style="color:#666666;"> [];</span></span>
<span class="line"><span style="color:#4D9375;">  for</span><span style="color:#666666;"> (</span><span style="color:#CB7676;">let</span><span style="color:#BD976A;"> i</span><span style="color:#666666;"> =</span><span style="color:#4C9A91;"> 0</span><span style="color:#666666;">;</span><span style="color:#BD976A;"> i</span><span style="color:#666666;"> &lt;</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">.</span><span style="color:#B8A965;">length</span><span style="color:#666666;">;</span><span style="color:#BD976A;"> i</span><span style="color:#CB7676;">++</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> elm</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">Array</span><span style="color:#666666;">.</span><span style="color:#80A665;">isArray</span><span style="color:#666666;">(</span><span style="color:#BD976A;">elm</span><span style="color:#666666;">))</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      result</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> result</span><span style="color:#666666;">.</span><span style="color:#80A665;">concat</span><span style="color:#666666;">(</span><span style="color:#80A665;">flatten1</span><span style="color:#666666;">(</span><span style="color:#BD976A;">elm</span><span style="color:#666666;">));</span></span>
<span class="line"><span style="color:#666666;">    }</span><span style="color:#4D9375;"> else</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      result</span><span style="color:#666666;">.</span><span style="color:#80A665;">push</span><span style="color:#666666;">(</span><span style="color:#BD976A;">elm</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> result</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> * 利用 reduce 和 递归</span></span>
<span class="line"><span style="color:#758575DD;"> * arr.reduce(callback, [initialValue])</span></span>
<span class="line"><span style="color:#758575DD;"> * callback （执行数组中每个值的函数，包含四个参数）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">    1、previousValue （上一次调用回调返回的值，或者是提供的初始值（initialValue））</span></span>
<span class="line"><span style="color:#758575DD;">    2、currentValue （数组中当前被处理的元素）</span></span>
<span class="line"><span style="color:#758575DD;">    3、index （当前元素在数组中的索引）</span></span>
<span class="line"><span style="color:#758575DD;">    4、array （调用 reduce 的数组）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">  initialValue （作为第一次调用 callback 的第一个参数。）</span></span>
<span class="line"><span style="color:#758575DD;">  */</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> flatten2</span><span style="color:#666666;">(</span><span style="color:#BD976A;">arry</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> arry</span><span style="color:#666666;">.</span><span style="color:#80A665;">reduce</span><span style="color:#666666;">(</span><span style="color:#CB7676;">function</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">prev</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> curr</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    return</span><span style="color:#BD976A;"> prev</span><span style="color:#666666;">.</span><span style="color:#80A665;">concat</span><span style="color:#666666;">(</span><span style="color:#BD976A;">Array</span><span style="color:#666666;">.</span><span style="color:#80A665;">isArray</span><span style="color:#666666;">(</span><span style="color:#BD976A;">curr</span><span style="color:#666666;">)</span><span style="color:#CB7676;"> ?</span><span style="color:#80A665;"> flatten2</span><span style="color:#666666;">(</span><span style="color:#BD976A;">curr</span><span style="color:#666666;">)</span><span style="color:#CB7676;"> :</span><span style="color:#BD976A;"> curr</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  },</span><span style="color:#666666;"> []);</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> * 利用 es6 flat</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> flatten4</span><span style="color:#666666;">(</span><span style="color:#BD976A;">arry</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">  // return arry.flat(2)</span><span style="color:#758575DD;"> // 两层</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#BD976A;"> arry</span><span style="color:#666666;">.</span><span style="color:#80A665;">flat</span><span style="color:#666666;">(</span><span style="color:#4D9375;">Infinity</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 无穷层次</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="防抖-节流" tabindex="-1"><a class="header-anchor" href="#防抖-节流"><span>防抖-节流</span></a></h2><p>防抖:固定时间内连续触发事件，只有最后一次会执行</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// 场景： 搜索输入框，提高体验度，在用户输入后可以立即展示搜索结果，而不需要每次点击搜索按钮。</span></span>
<span class="line"><span style="color:#758575DD;">// 分析： 设置定时器，如果存在定时器则代表还在时间内 执行清除定时器事件，否则设置定时器</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> debuouncES5</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> await</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> timer</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> thia</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">timer</span><span style="color:#666666;">)</span><span style="color:#80A665;"> clearTimeout</span><span style="color:#666666;">(</span><span style="color:#BD976A;">timer</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">    timer</span><span style="color:#666666;"> =</span><span style="color:#80A665;"> setTimeout</span><span style="color:#666666;">(</span><span style="color:#CB7676;">function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      fn</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#BD976A;">that</span><span style="color:#666666;">,</span><span style="color:#C99076;"> arguments</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    },</span><span style="color:#4D9375;"> await</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  };</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> debuouncES6</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> await</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> timer</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#666666;"> (...</span><span style="color:#BD976A;">args</span><span style="color:#666666;">)</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">timer</span><span style="color:#666666;">)</span><span style="color:#80A665;"> clearTimeout</span><span style="color:#666666;">(</span><span style="color:#BD976A;">timer</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">    timer</span><span style="color:#666666;"> =</span><span style="color:#80A665;"> setTimeout</span><span style="color:#666666;">(()</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      fn</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> args</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // es6 解构</span></span>
<span class="line"><span style="color:#666666;">    },</span><span style="color:#4D9375;"> await</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  };</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>节流：固定时间内连续触发事件，会按照事件间隔依次执行 需求场景：滚动 scroll、resize 事件监听</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// 1. 时间戳写法 简单</span></span>
<span class="line"><span style="color:#758575DD;">// 缺点：第一次立马执行</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> throttle</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> awit</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> lastTime</span><span style="color:#666666;"> =</span><span style="color:#4C9A91;"> 0</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">    // 时间戳写法 第一次立马执行</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> nowTime</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Date</span><span style="color:#666666;">.</span><span style="color:#80A665;">now</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">nowTime</span><span style="color:#CB7676;"> -</span><span style="color:#BD976A;"> lastTime</span><span style="color:#666666;"> &gt;=</span><span style="color:#BD976A;"> awit</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      lastTime</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> nowTime</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#BD976A;">      fn</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">,</span><span style="color:#C99076;"> arguments</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  };</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// 2. 第一次不立马执行，需要使用 定时器延迟，</span></span>
<span class="line"><span style="color:#758575DD;">// 缺点：最后一次也是延迟执行的</span></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> throttleTime</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> await</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> timer</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> that</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> arg</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> arguments</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#758575DD;">    // 如果 不存在定时器，则设置定时，执行函数并清除定时器</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#CB7676;">!</span><span style="color:#BD976A;">timer</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      timer</span><span style="color:#666666;"> =</span><span style="color:#80A665;"> setTimeout</span><span style="color:#666666;">(</span><span style="color:#CB7676;">function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">        fn</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#BD976A;">that</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> arg</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#758575DD;">        // 确保每次执行完之后 进来都是 新的 timer</span></span>
<span class="line"><span style="color:#BD976A;">        timer</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">      },</span><span style="color:#4D9375;"> await</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  };</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// 3. 由于前两个都有缺点，结合两者优点：再出一个。</span></span>
<span class="line"><span style="color:#758575DD;">// 分析：利用 函数调用时间-开始时间 = 剩余时间 与 间隔时间 对比，&lt;=0 则立马执行函数，否则设置定时器执行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> throttlePlus</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> await</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> timer</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">  let</span><span style="color:#BD976A;"> startTime</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Date</span><span style="color:#666666;">.</span><span style="color:#80A665;">now</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#4D9375;">  return</span><span style="color:#CB7676;"> function</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> that</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> args</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> arguments</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> currTime</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Date</span><span style="color:#666666;">.</span><span style="color:#80A665;">now</span><span style="color:#666666;">();</span><span style="color:#758575DD;"> // 记录当前时间，用来计算 剩余时间，多久执行下一次</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> shiyongTime</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> currTime</span><span style="color:#CB7676;"> -</span><span style="color:#BD976A;"> startTime</span><span style="color:#666666;">;</span><span style="color:#758575DD;"> // 已用的时间</span></span>
<span class="line"><span style="color:#CB7676;">    let</span><span style="color:#BD976A;"> remainning</span><span style="color:#666666;"> =</span><span style="color:#4D9375;"> await</span><span style="color:#CB7676;"> -</span><span style="color:#BD976A;"> shiyongTime</span><span style="color:#666666;">;</span><span style="color:#758575DD;"> // 剩余时间，用来判断 和 计时器</span></span>
<span class="line"></span>
<span class="line"><span style="color:#80A665;">    clearTimeout</span><span style="color:#666666;">(</span><span style="color:#BD976A;">timer</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 确保每次都是新计时器</span></span>
<span class="line"><span style="color:#758575DD;">    // 间隔时间 与 已使用时间比较，&lt;=0 代表时间到了 该执行函数了，并且把 开始时间重置到现在</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">remainning</span><span style="color:#666666;"> &lt;=</span><span style="color:#4C9A91;"> 0</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      fn</span><span style="color:#666666;">.</span><span style="color:#80A665;">apply</span><span style="color:#666666;">(</span><span style="color:#BD976A;">that</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> args</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">      startTime</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Date</span><span style="color:#666666;">.</span><span style="color:#80A665;">now</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    }</span><span style="color:#4D9375;"> else</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      timer</span><span style="color:#666666;"> =</span><span style="color:#80A665;"> setTimeout</span><span style="color:#666666;">(</span><span style="color:#BD976A;">fn</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> remainning</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 把剩余时间继续</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  };</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="排序和查找" tabindex="-1"><a class="header-anchor" href="#排序和查找"><span>排序和查找</span></a></h2><h3 id="插入排序" tabindex="-1"><a class="header-anchor" href="#插入排序"><span>插入排序</span></a></h3><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">function</span><span style="color:#80A665;"> sort</span><span style="color:#666666;">(</span><span style="color:#BD976A;">arr</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">  for</span><span style="color:#666666;"> (</span><span style="color:#CB7676;">let</span><span style="color:#BD976A;"> i</span><span style="color:#CB7676;"> in</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#4D9375;">    while</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">i</span><span style="color:#666666;"> &gt;</span><span style="color:#4C9A91;"> 0</span><span style="color:#CB7676;"> &amp;&amp;</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#666666;">]</span><span style="color:#666666;"> &lt;</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#CB7676;"> -</span><span style="color:#4C9A91;"> 1</span><span style="color:#666666;">])</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">      // 跟前面那个去比较</span></span>
<span class="line"><span style="color:#666666;">      [</span><span style="color:#BD976A;">arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#666666;">],</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#CB7676;"> -</span><span style="color:#4C9A91;"> 1</span><span style="color:#666666;">]]</span><span style="color:#666666;"> =</span><span style="color:#666666;"> [</span><span style="color:#BD976A;">arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#CB7676;"> -</span><span style="color:#4C9A91;"> 1</span><span style="color:#666666;">],</span><span style="color:#BD976A;"> arr</span><span style="color:#666666;">[</span><span style="color:#BD976A;">i</span><span style="color:#666666;">]];</span></span>
<span class="line"><span style="color:#BD976A;">      i</span><span style="color:#CB7676;">--</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设计模式" tabindex="-1"><a class="header-anchor" href="#设计模式"><span>设计模式</span></a></h2><h3 id="发布订阅模式" tabindex="-1"><a class="header-anchor" href="#发布订阅模式"><span>发布订阅模式</span></a></h3><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// 实现一个 事件触发器</span></span>
<span class="line"><span style="color:#CB7676;">class</span><span style="color:#5DA994;"> EventEmiter</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  constructor</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">    // 存储事件和对应的回调函数  { &#39;click&#39;: [fn1,fn2] ,change: [fn3, fn4]}</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">create</span><span style="color:#666666;">(</span><span style="color:#CB7676;">null</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">  // 注册事件，因为可以是多个事件，所以是数组形式</span></span>
<span class="line"><span style="color:#80A665;">  $on</span><span style="color:#666666;">(</span><span style="color:#BD976A;">eventType</span><span style="color:#666666;">,</span><span style="color:#BD976A;"> handle</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;">[</span><span style="color:#BD976A;">eventType</span><span style="color:#666666;">]</span><span style="color:#666666;"> =</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;">[</span><span style="color:#BD976A;">eventType</span><span style="color:#666666;">]</span><span style="color:#CB7676;"> ||</span><span style="color:#666666;"> [];</span><span style="color:#758575DD;"> // 初始化当前注册的事件（因为刚开始没有事件）</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;">[</span><span style="color:#BD976A;">eventType</span><span style="color:#666666;">].</span><span style="color:#80A665;">push</span><span style="color:#666666;">(</span><span style="color:#BD976A;">handle</span><span style="color:#666666;">);</span><span style="color:#758575DD;"> // 数组的形式存起来</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#758575DD;">  // 触发(发布)事件</span></span>
<span class="line"><span style="color:#80A665;">  $emit</span><span style="color:#666666;">(</span><span style="color:#BD976A;">eventType</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">    // 根据 事件类型 找到所有注册的事件，遍历依次执行</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;">[</span><span style="color:#BD976A;">eventType</span><span style="color:#666666;">].</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">((</span><span style="color:#BD976A;">handle</span><span style="color:#666666;">)</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#80A665;">      handle</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    });</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">// 测试</span></span>
<span class="line"><span style="color:#CB7676;">let</span><span style="color:#BD976A;"> em</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> EventEmiter</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#BD976A;">em</span><span style="color:#666666;">.</span><span style="color:#80A665;">$on</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">click</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">,</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">  console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">em.$on</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="观察者模式" tabindex="-1"><a class="header-anchor" href="#观察者模式"><span>观察者模式</span></a></h3><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#758575DD;">// 观察者 Watcher：当事件触发的时候，需要去调用的函数 update()</span></span>
<span class="line"><span style="color:#758575DD;">// 发布者 Dep：收集观察者并当数据发生变化时通知各个观察者</span></span>
<span class="line"><span style="color:#758575DD;">// subs: 存储各个观察者</span></span>
<span class="line"><span style="color:#758575DD;">// addSub(): 添加观察者</span></span>
<span class="line"><span style="color:#758575DD;">// notify() : 当数据发生变化时 通知各个订阅者(观察者)去调用 他们自己的函数 update</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">// 定义 观察者 需要做的事情</span></span>
<span class="line"><span style="color:#CB7676;">class</span><span style="color:#5DA994;"> Watcher</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#80A665;">  update</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">    console</span><span style="color:#666666;">.</span><span style="color:#80A665;">log</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">我是观察者 update 函数</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">// 发布</span></span>
<span class="line"><span style="color:#CB7676;">class</span><span style="color:#5DA994;"> Dep</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  constructor</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;"> =</span><span style="color:#666666;"> [];</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#80A665;">  addSub</span><span style="color:#666666;">(</span><span style="color:#BD976A;">sub</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">    // 确保是一个 观察者</span></span>
<span class="line"><span style="color:#4D9375;">    if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">sub</span><span style="color:#CB7676;"> &amp;&amp;</span><span style="color:#BD976A;"> sub</span><span style="color:#666666;">.</span><span style="color:#BD976A;">update</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#C99076;">      this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;">.</span><span style="color:#80A665;">push</span><span style="color:#666666;">(</span><span style="color:#BD976A;">sub</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    }</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#80A665;">  notify</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#758575DD;">    // 遍历所有观察者调用自己的方法</span></span>
<span class="line"><span style="color:#C99076;">    this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">subs</span><span style="color:#666666;">.</span><span style="color:#80A665;">forEach</span><span style="color:#666666;">((</span><span style="color:#BD976A;">sub</span><span style="color:#666666;">)</span><span style="color:#666666;"> =&gt;</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#BD976A;">      sub</span><span style="color:#666666;">.</span><span style="color:#80A665;">update</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    });</span></span>
<span class="line"><span style="color:#666666;">  }</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#758575DD;">// 测试</span></span>
<span class="line"><span style="color:#CB7676;">let</span><span style="color:#BD976A;"> wac</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Watcher</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#CB7676;">let</span><span style="color:#BD976A;"> dep</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> Dep</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#BD976A;">dep</span><span style="color:#666666;">.</span><span style="color:#80A665;">addSub</span><span style="color:#666666;">(</span><span style="color:#BD976A;">wac</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#BD976A;">dep</span><span style="color:#666666;">.</span><span style="color:#80A665;">notify</span><span style="color:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-acd573c9 data-v-68976fe9><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-68976fe9><span class="contributors-label" data-v-68976fe9>贡献者: </span><span class="contributors-info" data-v-68976fe9><!--[--><!--[--><span class="contributor" data-v-68976fe9>yuquan</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-68976fe9><div class="pager" data-v-68976fe9><a class="vp-link no-icon link pager-link prev" href="/EFlong2/article/4d19tfzr/" data-v-68976fe9 data-v-ef7dc74f><!--[--><span class="desc" data-v-68976fe9>上一页</span><span class="title" data-v-68976fe9>error</span><!--]--><!----></a></div><div class="pager" data-v-68976fe9><a class="vp-link no-icon link pager-link next" href="/EFlong2/article/prkb43xt/" data-v-68976fe9 data-v-ef7dc74f><!--[--><span class="desc" data-v-68976fe9>下一页</span><span class="title" data-v-68976fe9>vueyouhua</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-42b1b316 data-v-2741fdf4><span class="percent" data-allow-mismatch data-v-2741fdf4>0%</span><span class="show icon vpi-back-to-top" data-v-2741fdf4></span><svg aria-hidden="true" data-v-2741fdf4><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-2741fdf4></circle></svg></button><footer class="vp-footer" vp-footer data-v-42b1b316 data-v-a56133fd><!--[--><div class="container" data-v-a56133fd><p class="message" data-v-a56133fd>个人前端笔记 · 记录成长</p><p class="copyright" data-v-a56133fd>Copyright © 2024-present 逍遥生</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/EFlong2/assets/app-B8vNsW8O.js" defer></script></body></html>
<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.22" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.144" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"vueyouhua","image":[""],"dateModified":"2026-01-21T10:05:29.000Z","author":[]}</script><meta property="og:url" content="https://yangyl568.github.io/EFlong2/EFlong2/article/prkb43xt/"><meta property="og:site_name" content="逍遥生-前端笔记"><meta property="og:title" content="vueyouhua"><meta property="og:description" content="原创自：https://juejin.im/post/5d548b83f265da03ab42471d 一、代码层面的优化 v-for 遍历必须为 item 添加 key，且避免同时使用 v-if 方便 Vue.js 内部机制精准找到该条列表数据。当 state 更新时，新的状态值和旧的状态值对比，较快地定位到 diff 。 长列表性能优化 Vue 会..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2026-01-21T10:05:29.000Z"><meta property="article:modified_time" content="2026-01-21T10:05:29.000Z"><link rel="icon" href="/EFlong2/favicon.ico"><title>vueyouhua | 逍遥生-前端笔记</title><meta name="description" content="原创自：https://juejin.im/post/5d548b83f265da03ab42471d 一、代码层面的优化 v-for 遍历必须为 item 添加 key，且避免同时使用 v-if 方便 Vue.js 内部机制精准找到该条列表数据。当 state 更新时，新的状态值和旧的状态值对比，较快地定位到 diff 。 长列表性能优化 Vue 会..."><link rel="preload" href="/EFlong2/assets/style-CfJm6DmB.css" as="style"><link rel="stylesheet" href="/EFlong2/assets/style-CfJm6DmB.css"><link rel="modulepreload" href="/EFlong2/assets/app-B8vNsW8O.js"><link rel="modulepreload" href="/EFlong2/assets/index.html-1qwQ9Pq7.js"><link rel="prefetch" href="/EFlong2/assets/index.html-zXWFOe0D.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Bw90F3yb.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BelW4ppt.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Ctuqa0sD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-FwogDzqX.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DR0e5At8.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BhMXZ9G5.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Bt7Tgj4T.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-QzaB5Vzc.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DduWtOQY.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BIGhJJUR.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DvZQTLsa.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BQBHUjX4.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-D47R4Maf.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-C9M-wu3T.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CCfTEzkn.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BFYrFklv.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-iEsnvDzn.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-7VnUsEfY.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BYTB8H5S.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DvO-2b0D.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Ds2hR_Vn.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BiVxADXx.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CmYp8HsD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/404.html-BAkD-u4a.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-I0DX2ivS.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Cjv1ND6i.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-B9DnuIEN.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-Bboz4EDh.js" as="script"><link rel="prefetch" href="/EFlong2/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/searchBox-default-BXpzQnZU.js" as="script"><link rel="prefetch" href="/EFlong2/assets/SearchBox-CnOaIucd.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-42b1b316><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c5a1a5dd></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-c5a1a5dd> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-42b1b316 data-v-b0eb646e><div class="vp-navbar" vp-navbar data-v-b0eb646e data-v-bafe8e2a><div class="wrapper" data-v-bafe8e2a><div class="container" data-v-bafe8e2a><div class="title" data-v-bafe8e2a><div class="vp-navbar-title" data-v-bafe8e2a data-v-a33a92d8><a class="vp-link no-icon link title" href="/EFlong2/" data-v-a33a92d8 data-v-ef7dc74f><!--[--><!--[--><!--]--><!----><span data-v-a33a92d8>逍遥生-前端笔记</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-bafe8e2a><div class="content-body" data-v-bafe8e2a><!--[--><!--]--><div class="vp-navbar-search search" data-v-bafe8e2a><div class="search-wrapper" data-v-921063b6><!----><div id="local-search" data-v-921063b6><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-921063b6><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-bafe8e2a data-v-78d99cd9><span id="main-nav-aria-label" class="visually-hidden" data-v-78d99cd9>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/EFlong2/" tabindex="0" data-v-78d99cd9 data-v-340c779d data-v-ef7dc74f><!--[--><!----><span data-v-340c779d>首页</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-78d99cd9 data-v-afaa7d71><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-afaa7d71><span class="text" data-v-afaa7d71><!----><!----><span data-v-afaa7d71>八股文</span><!----><span class="vpi-chevron-down text-icon" data-v-afaa7d71></span></span></button><div class="menu" data-v-afaa7d71><div class="vp-menu" data-v-afaa7d71 data-v-f95f3966><div class="items" data-v-f95f3966><!--[--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/6dcud4h6/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> CSS 必备知识点 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/gl0mmfkz/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> JavaScript <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/7vxts4zb/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 前端工程化 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/hhpphdcq/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 框架 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/r5cjcrbh/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> Node <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-78d99cd9 data-v-afaa7d71><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-afaa7d71><span class="text" data-v-afaa7d71><!----><!----><span data-v-afaa7d71>积累</span><!----><span class="vpi-chevron-down text-icon" data-v-afaa7d71></span></span></button><div class="menu" data-v-afaa7d71><div class="vp-menu" data-v-afaa7d71 data-v-f95f3966><div class="items" data-v-f95f3966><!--[--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/emukhg09/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 必备技能 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/vphzbmae/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 扩展 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/4d19tfzr/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> 问题收集 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f95f3966 data-v-f9536bb5><a class="vp-link no-icon link" href="/EFlong2/article/isdvu4i2/" data-v-f9536bb5 data-v-ef7dc74f><!--[--><!----> Vue3项目 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-bafe8e2a data-v-69743219><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-69743219 data-v-4cd26491 data-v-aef50a60><span class="check" data-v-aef50a60><span class="icon" data-v-aef50a60><!--[--><span class="vpi-sun sun" data-v-4cd26491></span><span class="vpi-moon moon" data-v-4cd26491></span><!--]--></span></span></button></div><!----><div class="vp-flyout vp-navbar-extra extra" data-v-bafe8e2a data-v-4a00eeb6 data-v-afaa7d71><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-afaa7d71><span class="vpi-more-horizontal icon" data-v-afaa7d71></span></button><div class="menu" data-v-afaa7d71><div class="vp-menu" data-v-afaa7d71 data-v-f95f3966><!----><!--[--><!--[--><!----><div class="group" data-v-4a00eeb6><div class="item appearance" data-v-4a00eeb6><p class="label" data-v-4a00eeb6>外观</p><div class="appearance-action" data-v-4a00eeb6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-4a00eeb6 data-v-4cd26491 data-v-aef50a60><span class="check" data-v-aef50a60><span class="icon" data-v-aef50a60><!--[--><span class="vpi-sun sun" data-v-4cd26491></span><span class="vpi-moon moon" data-v-4cd26491></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-bafe8e2a data-v-8d58f15b><span class="container" data-v-8d58f15b><span class="top" data-v-8d58f15b></span><span class="middle" data-v-8d58f15b></span><span class="bottom" data-v-8d58f15b></span></span></button></div></div></div></div><div class="divider" data-v-bafe8e2a><div class="divider-line" data-v-bafe8e2a></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-42b1b316 data-v-7090fa6d><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-7090fa6d><span class="vpi-align-left menu-icon" data-v-7090fa6d></span><span class="menu-text" data-v-7090fa6d>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-7090fa6d data-v-6f8484ca><button data-v-6f8484ca>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-42b1b316 data-v-c15d6dee><div class="vp-doc-container is-blog" data-v-c15d6dee data-v-acd573c9><!--[--><!--]--><div class="container" data-v-acd573c9><!----><div class="content" data-v-acd573c9><div class="content-container" data-v-acd573c9><!--[--><!--]--><main class="main" data-v-acd573c9><nav class="vp-breadcrumb" data-v-acd573c9 data-v-622aec34><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-622aec34><!--[--><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb" href="/EFlong2/" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-622aec34></span><meta property="name" content="首页" data-v-622aec34><meta property="position" content="1" data-v-622aec34></li><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb" href="/EFlong2/blog/" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-622aec34></span><meta property="name" content="博客" data-v-622aec34><meta property="position" content="2" data-v-622aec34></li><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb" href="/EFlong2/blog/categories/?id=5d295d" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->baguwen<!--]--><!----></a><span class="vpi-chevron-right" data-v-622aec34></span><meta property="name" content="baguwen" data-v-622aec34><meta property="position" content="3" data-v-622aec34></li><li property="itemListElement" typeof="ListItem" data-v-622aec34><a class="vp-link no-icon link breadcrumb current" href="/EFlong2/article/prkb43xt/" property="item" typeof="WebPage" data-v-622aec34 data-v-ef7dc74f><!--[-->vueyouhua<!--]--><!----></a><!----><meta property="name" content="vueyouhua" data-v-622aec34><meta property="position" content="4" data-v-622aec34></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-fbd34026>vueyouhua <!----></h1><div class="vp-doc-meta" data-v-fbd34026><!--[--><!--]--><p class="reading-time" data-v-fbd34026><span class="vpi-books icon" data-v-fbd34026></span><span data-v-fbd34026>约 1935 字</span><span data-v-fbd34026>大约 6 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-fbd34026><span class="vpi-clock icon" data-v-fbd34026></span><span data-v-fbd34026>2025-04-24</span></p></div><!--]--><!--[--><!--]--><div class="_article_prkb43xt_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-acd573c9><!--[--><!--]--><div data-v-acd573c9><blockquote><p>原创自：https://juejin.im/post/5d548b83f265da03ab42471d</p></blockquote><h2 id="一、代码层面的优化" tabindex="-1"><a class="header-anchor" href="#一、代码层面的优化"><span>一、代码层面的优化</span></a></h2><blockquote><p>v-for 遍历必须为 item 添加 key，且避免同时使用 v-if</p></blockquote><p>方便 Vue.js 内部机制精准找到该条列表数据。当 state 更新时，新的状态值和旧的状态值对比，较快地定位到 diff 。</p><blockquote><p>长列表性能优化</p></blockquote><p>Vue 会通过 Object.defineProperty 对数据进行劫持，来实现视图响应数据的变化，然而有些时候我们的组件就是纯粹的数据展示，不会有任何改变，我们就不需要 Vue 来劫持我们的数据，在大量数据展示的情况下，这能够很明显的减少组件初始化的时间，那如何禁止 Vue 劫持我们的数据呢？可以通过 Object.freeze 方法来冻结一个对象，一旦被冻结的对象就再也不能被修改了。</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">users</span><span style="color:#666666;"> =</span><span style="color:#BD976A;"> Object</span><span style="color:#666666;">.</span><span style="color:#80A665;">freeze</span><span style="color:#666666;">(</span><span style="color:#BD976A;">users</span><span style="color:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>事件的销毁</p></blockquote><p>如果在 js 内使用 addEventListene 等方式是不会自动销毁的，我们需要在组件销毁时手动移除这些事件的监听，以免造成内存泄露，如：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#80A665;">created</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#80A665;">  addEventListener</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&#39;</span><span style="color:#C98A7D;">click</span><span style="color:#C98A7D77;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">click</span><span style="color:#666666;">,</span><span style="color:#4D9375;"> false</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#666666;">},</span></span>
<span class="line"><span style="color:#80A665;">beforeDestroy</span><span style="color:#666666;">()</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#80A665;">  removeEventListener</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&#39;</span><span style="color:#C98A7D;">click</span><span style="color:#C98A7D77;">&#39;</span><span style="color:#666666;">,</span><span style="color:#C99076;"> this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">click</span><span style="color:#666666;">,</span><span style="color:#4D9375;"> false</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>图片资源懒加载</p></blockquote><p>使用 Vue 的 vue-lazyload 插件：对于图片过多的页面，为了加速页面加载速度，所以很多时候我们需要将页面内未出现在可视区域内的图片先不做加载， 等到滚动到可视区域后再去加载。这样对于页面加载性能上会有很大的提升，也提高了用户体验。</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#DBD7CAEE;">（</span><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;">）</span><span style="color:#BD976A;">安装插件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">npm</span><span style="color:#BD976A;"> install</span><span style="color:#BD976A;"> vue</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">lazyload</span><span style="color:#CB7676;"> --</span><span style="color:#BD976A;">save</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">dev</span></span>
<span class="line"><span style="color:#DBD7CAEE;">（</span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;">）</span><span style="color:#BD976A;">在入口文件</span><span style="color:#BD976A;"> man</span><span style="color:#666666;">.</span><span style="color:#BD976A;">js</span><span style="color:#BD976A;"> 中引入并使用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#BD976A;"> VueLazyload</span><span style="color:#4D9375;"> from</span><span style="color:#C98A7D77;"> &#39;</span><span style="color:#C98A7D;">vue-lazyload</span><span style="color:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="color:#BD976A;">然后再</span><span style="color:#BD976A;"> vue</span><span style="color:#BD976A;"> 中直接使用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">Vue</span><span style="color:#666666;">.</span><span style="color:#80A665;">use</span><span style="color:#666666;">(</span><span style="color:#BD976A;">VueLazyload</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#BD976A;">或者添加自定义选项</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BD976A;">Vue</span><span style="color:#666666;">.</span><span style="color:#80A665;">use</span><span style="color:#666666;">(</span><span style="color:#BD976A;">VueLazyload</span><span style="color:#666666;">,</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#B8A965;">preLoad</span><span style="color:#666666;">:</span><span style="color:#4C9A91;"> 1.3</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#B8A965;">error</span><span style="color:#666666;">:</span><span style="color:#C98A7D77;"> &#39;</span><span style="color:#C98A7D;">dist/error.png</span><span style="color:#C98A7D77;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#B8A965;">loading</span><span style="color:#666666;">:</span><span style="color:#C98A7D77;"> &#39;</span><span style="color:#C98A7D;">dist/loading.gif</span><span style="color:#C98A7D77;">&#39;</span><span style="color:#666666;">,</span></span>
<span class="line"><span style="color:#B8A965;">attempt</span><span style="color:#666666;">:</span><span style="color:#4C9A91;"> 1</span></span>
<span class="line"><span style="color:#666666;">})</span></span>
<span class="line"><span style="color:#DBD7CAEE;">（</span><span style="color:#4C9A91;">3</span><span style="color:#DBD7CAEE;">）</span><span style="color:#BD976A;">在</span><span style="color:#BD976A;"> vue</span><span style="color:#BD976A;"> 文件中将</span><span style="color:#BD976A;"> img</span><span style="color:#BD976A;"> 标签的</span><span style="color:#BD976A;"> src</span><span style="color:#BD976A;"> 属性直接改为</span><span style="color:#BD976A;"> v</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">lazy</span><span style="color:#DBD7CAEE;"> ，</span><span style="color:#BD976A;">从而将图片显示方式更改为懒加载显示</span><span style="color:#DBD7CAEE;">：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">&lt;</span><span style="color:#4D9375;">img</span><span style="color:#BD976A;"> v-lazy</span><span style="color:#666666;">=</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">/static/img/1.png</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>路由懒加载</p></blockquote><p>Vue 是单页面应用，可能会有很多的路由引入 ，这样使用 webpcak 打包后的文件很大，当进入首页时，加载的资源过多，页面会出现白屏的情况，不利于用户体验。</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#CB7676;">const</span><span style="color:#80A665;"> Com</span><span style="color:#666666;"> =</span><span style="color:#666666;"> ()</span><span style="color:#666666;"> =&gt;</span><span style="color:#CB7676;"> import</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">./Com.vue</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#BD976A;"> router</span><span style="color:#666666;"> =</span><span style="color:#CB7676;"> new</span><span style="color:#80A665;"> VueRouter</span><span style="color:#666666;">({</span></span>
<span class="line"><span style="color:#B8A965;">  routes</span><span style="color:#666666;">:</span><span style="color:#666666;"> [{</span><span style="color:#B8A965;"> path</span><span style="color:#666666;">:</span><span style="color:#C98A7D77;"> &quot;</span><span style="color:#C98A7D;">/foo</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">,</span><span style="color:#B8A965;"> component</span><span style="color:#666666;">:</span><span style="color:#BD976A;"> Foo</span><span style="color:#666666;"> }],</span></span>
<span class="line"><span style="color:#666666;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>第三方 插件的按需引入</p></blockquote><p>具体怎么做，需要查找下文档</p><blockquote><p>优化无限列表性能 （这个需要再研究）</p></blockquote><p>如果你的应用存在非常长或者无限滚动的列表，那么需要采用 窗口化 的技术来优化性能，只需要渲染少部分区域的内容，减少重新渲染组件和创建 dom 节点的时间。 你可以参考以下开源项目 <code>vue-virtual-scroll-list</code> 和 <code>vue-virtual-scroller</code> 来优化这种无限列表的场景的。</p><h2 id="二、webpack-层面的优化" tabindex="-1"><a class="header-anchor" href="#二、webpack-层面的优化"><span>二、Webpack 层面的优化</span></a></h2><blockquote><p>优化 resolve.extensions 配置</p></blockquote><p><strong>问题描述：</strong> 当遇到 require ( &#39;. /data ’）这样的导入语句时，Webpack 会先去寻找./data .js 文件，如果该文件不存在，就去寻找./data.json 文件，如果还是找不到就报错。</p><p><strong>解决方案：</strong> 在源码中写导入语句时，要尽可能带上后缀，从而可以避免寻找过程。例如在确定的情况下将 require(’. /data ’)写成 require(’. /data.json ’)</p><blockquote><p>Webpack 对图片进行压缩 ( <strong>现在使用 tinyPNG 手动压缩也很方便</strong> )</p></blockquote><p>在 vue 项目中除了可以在 webpack.base.conf.js 中 url-loader 中设置 limit 大小来对图片处理，对小于 limit 的图片转化为 base64 格式，其余的不做操作。所以对有些较大的图片资源，在请求资源的时候，加载会很慢，我们可以用 image-webpack-loader 来压缩图片： <a href="https://github.com/tcoopman/image-webpack-loader" target="_blank" rel="noopener noreferrer">查看详细使用</a></p><blockquote><p>减少 ES6 转为 ES5 的冗余代码(这个有点意思)</p></blockquote><p>Babel 插件会在将 ES6 代码转换成 ES5 代码时会注入一些辅助函数，例如下面的 ES6 代码： <code>class HelloWebpack extends Component{...}</code> 这段代码再被转换成能正常运行的 ES5 代码时需要以下两个辅助函数：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#BD976A;">babel</span><span style="color:#CB7676;"> -</span><span style="color:#BD976A;"> runtime</span><span style="color:#CB7676;"> /</span><span style="color:#BD976A;"> helpers</span><span style="color:#CB7676;"> /</span><span style="color:#BD976A;"> createClass</span><span style="color:#666666;">;</span><span style="color:#758575DD;"> // 用于实现 class 语法</span></span>
<span class="line"><span style="color:#BD976A;">babel</span><span style="color:#CB7676;"> -</span><span style="color:#BD976A;"> runtime</span><span style="color:#CB7676;"> /</span><span style="color:#BD976A;"> helpers</span><span style="color:#CB7676;"> /</span><span style="color:#BD976A;"> inherits</span><span style="color:#666666;">;</span><span style="color:#758575DD;"> // 用于实现 extends 语法</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>在默认情况下， Babel 会在每个输出文件中内嵌这些依赖的辅助函数代码，如果多个源代码文件都依赖这些辅助函数，那么这些辅助函数的代码将会出现很多次，造成代码冗余。为了不让这些辅助函数的代码重复出现，可以在依赖它们时通过 require(&#39;babel-runtime/helpers/createClass&#39;) 的方式导入，这样就能做到只让它们出现一次。babel-plugin-transform-runtime 插件就是用来实现这个作用的，将相关辅助函数进行替换成导入语句，从而减小 babel 编译出来的代码的文件大小。</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#DBD7CAEE;">（</span><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;">）</span><span style="color:#BD976A;">首先</span><span style="color:#DBD7CAEE;">，</span><span style="color:#BD976A;">安装</span><span style="color:#BD976A;"> babel</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">plugin</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">transform</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">runtime</span><span style="color:#DBD7CAEE;"> ：</span></span>
<span class="line"><span style="color:#BD976A;">npm</span><span style="color:#BD976A;"> install</span><span style="color:#BD976A;"> babel</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">plugin</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">transform</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">runtime</span><span style="color:#CB7676;"> --</span><span style="color:#BD976A;">save</span><span style="color:#CB7676;">-</span><span style="color:#BD976A;">dev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">（</span><span style="color:#4C9A91;">2</span><span style="color:#DBD7CAEE;">）</span><span style="color:#BD976A;">然后</span><span style="color:#DBD7CAEE;">，</span><span style="color:#BD976A;">修改</span><span style="color:#666666;"> .</span><span style="color:#BD976A;">babelrc</span><span style="color:#BD976A;"> 配置文件为</span><span style="color:#DBD7CAEE;">：</span></span>
<span class="line"><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">plugins</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#DBD7CAEE;">: </span><span style="color:#666666;">[</span></span>
<span class="line"><span style="color:#C98A7D77;">    &quot;</span><span style="color:#C98A7D;">transform-runtime</span><span style="color:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="color:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>优化 SourceMap</p></blockquote><p>我们在项目进行打包后，会将开发中的多个文件代码打包到一个文件中，并且经过压缩、去掉多余的空格、babel 编译化后，最终将编译得到的代码会用于线上环境，那么这样处理后的代码和源代码会有很大的差别，当有 bug 的时候，我们只能定位到压缩处理后的代码位置，无法定位到开发环境中的代码，对于开发来说不好调式定位问题，因此 sourceMap 出现了，它就是为了解决不好调式代码问题的。</p><p><strong>开发环境推荐： cheap-module-eval-source-map 生产环境推荐： cheap-module-source-map</strong></p><blockquote><p>构建结果输出分析 (cli3.0 之后自带)</p></blockquote><p>Webpack 输出的代码可读性非常差而且文件非常大，让我们非常头疼。为了更简单、直观地分析输出结果，社区中出现了许多可视化分析工具。 Vue 项目中用到的分析工具：<code>webpack-bundle-analyzer</code><strong>cli3.0 之后自带</strong> 我们在项目中 <code>webpack.prod.conf.js</code> 进行配置：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" style="background-color:#121212;color:#dbd7caee;"><pre class="shiki vitesse-dark vp-code"><code><span class="line"><span style="color:#4D9375;">if</span><span style="color:#666666;"> (</span><span style="color:#BD976A;">config</span><span style="color:#666666;">.</span><span style="color:#BD976A;">build</span><span style="color:#666666;">.</span><span style="color:#BD976A;">bundleAnalyzerReport</span><span style="color:#666666;">)</span><span style="color:#666666;"> {</span></span>
<span class="line"><span style="color:#CB7676;">  var</span><span style="color:#BD976A;"> BundleAnalyzerPlugin</span><span style="color:#666666;"> =</span></span>
<span class="line"><span style="color:#80A665;">    require</span><span style="color:#666666;">(</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#C98A7D;">webpack-bundle-analyzer</span><span style="color:#C98A7D77;">&quot;</span><span style="color:#666666;">).</span><span style="color:#BD976A;">BundleAnalyzerPlugin</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#BD976A;">  webpackConfig</span><span style="color:#666666;">.</span><span style="color:#BD976A;">plugins</span><span style="color:#666666;">.</span><span style="color:#80A665;">push</span><span style="color:#666666;">(</span><span style="color:#CB7676;">new</span><span style="color:#80A665;"> BundleAnalyzerPlugin</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行 <code>$ npm run build --report</code> 后生成分析报告如下：</p><h2 id="三、基础的-web-技术优化" tabindex="-1"><a class="header-anchor" href="#三、基础的-web-技术优化"><span>三、基础的 Web 技术优化</span></a></h2><blockquote><p>开启 gzip 压缩</p></blockquote><p>gzip 压缩效率非常高，通常可以达到 70% 的压缩率，也就是说，如果你的网页有 30K，压缩之后就变成了 9K 左右</p><p>观察网络面板里面的 <code>Response Header , Content-Encoding: gzip</code></p><blockquote><p>浏览器缓存 使用 CDN</p></blockquote><p>CDN 可以通过不同的域名来加载文件，从而使下载文件的并发连接数大大增加，且 CDN 具有更好的可用性，更低的网络延迟和丢包率 。</p><blockquote><p>使用 Chrome Performance 查找性能瓶颈</p></blockquote><p>Chrome 的 Performance 面板可以录制一段时间内的 js 执行细节及时间。使用 Chrome 开发者工具分析页面性能的步骤如下。</p><ol><li>打开 Chrome 开发者工具，切换到 Performance 面板</li><li>点击 Record 开始录制</li><li>刷新页面或展开某个节点</li><li>点击 Stop 停止录制</li></ol><h2 id="如何减少白屏时间" tabindex="-1"><a class="header-anchor" href="#如何减少白屏时间"><span>如何减少白屏时间</span></a></h2><p>主要是因为首次加载资源太多、太大请求慢导致的，所以从这几点入手解决。</p><p>1、因为 解析HTML 时遇到 script 会阻塞 DOM 的构建，所以 后置或者 异步 defer：异步加载，按照顺序执行， async 异步不按照顺序执行</p><p>2、静态资源可以使用 cdn</p><p>3、路由懒加载 import(&#39;....&#39;)</p><p>4、DNS 缓存、预加载策略 preload: 预先加载资源 prefetch：预判加载资源</p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-acd573c9 data-v-68976fe9><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-68976fe9><span class="contributors-label" data-v-68976fe9>贡献者: </span><span class="contributors-info" data-v-68976fe9><!--[--><!--[--><span class="contributor" data-v-68976fe9>yuquan</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-68976fe9><div class="pager" data-v-68976fe9><a class="vp-link no-icon link pager-link prev" href="/EFlong2/article/emukhg09/" data-v-68976fe9 data-v-ef7dc74f><!--[--><span class="desc" data-v-68976fe9>上一页</span><span class="title" data-v-68976fe9>bibeiskill</span><!--]--><!----></a></div><div class="pager" data-v-68976fe9><a class="vp-link no-icon link pager-link next" href="/EFlong2/article/r5cjcrbh/" data-v-68976fe9 data-v-ef7dc74f><!--[--><span class="desc" data-v-68976fe9>下一页</span><span class="title" data-v-68976fe9>node</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-42b1b316 data-v-2741fdf4><span class="percent" data-allow-mismatch data-v-2741fdf4>0%</span><span class="show icon vpi-back-to-top" data-v-2741fdf4></span><svg aria-hidden="true" data-v-2741fdf4><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-2741fdf4></circle></svg></button><footer class="vp-footer" vp-footer data-v-42b1b316 data-v-a56133fd><!--[--><div class="container" data-v-a56133fd><p class="message" data-v-a56133fd>个人前端笔记 · 记录成长</p><p class="copyright" data-v-a56133fd>Copyright © 2024-present 逍遥生</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/EFlong2/assets/app-B8vNsW8O.js" defer></script></body></html>
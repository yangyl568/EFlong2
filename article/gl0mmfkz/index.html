<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.22" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="favicon.ico"><script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ce5b5e7aef70331f91bf3366eeef2b2b";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
          })();
          </script><title>javascript | 逍遥生-前端笔记</title><meta name="description" content="前端面试 前端面试题 css javascript vue js 前端博客">
    <link rel="preload" href="/EFlong2/assets/style-B_I4JFgE.css" as="style"><link rel="stylesheet" href="/EFlong2/assets/style-B_I4JFgE.css">
    <link rel="modulepreload" href="/EFlong2/assets/app-BxErJW_0.js"><link rel="modulepreload" href="/EFlong2/assets/index.html-DYbK7GBT.js">
    <link rel="prefetch" href="/EFlong2/assets/index.html-BECnI4Qm.js" as="script"><link rel="prefetch" href="/EFlong2/assets/AI-Codereview-Gitlab.html-C40SRBxb.js" as="script"><link rel="prefetch" href="/EFlong2/assets/AICodeReview.html-BpkDQwtD.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-jsOsEB4_.js" as="script"><link rel="prefetch" href="/EFlong2/assets/prompt.html-b7_sjSWS.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CD0ZZMky.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-t846d780.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CRI1dQ40.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CiBAwgif.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-VoWtZnAR.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-32r46fdK.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CXR_PAiu.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DfzHKBFH.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-BBWo4PUU.js" as="script"><link rel="prefetch" href="/EFlong2/assets/github_pages.html-DH7pwx90.js" as="script"><link rel="prefetch" href="/EFlong2/assets/gitlab.html-BksK6Jp6.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CuqFK7VA.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-DDmhz98O.js" as="script"><link rel="prefetch" href="/EFlong2/assets/tauri.html-D1FXAXnS.js" as="script"><link rel="prefetch" href="/EFlong2/assets/vue3.html-DJ2TrAjH.js" as="script"><link rel="prefetch" href="/EFlong2/assets/index.html-CCqIit0z.js" as="script"><link rel="prefetch" href="/EFlong2/assets/404.html-BNbPQGam.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/EFlong2/"><!----><span class="vp-site-name" aria-hidden="true">逍遥生-前端笔记</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/EFlong2/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="八股文"><span class="title">八股文</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="八股文"><span class="title">八股文</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/6dcud4h6/" aria-label="CSS 必备知识点"><!--[--><!--[--><!--]--><!--]-->CSS 必备知识点<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/EFlong2/article/gl0mmfkz/" aria-label="javascript"><!--[--><!--[--><!--]--><!--]-->javascript<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/7vxts4zb/" aria-label="前端工程化"><!--[--><!--[--><!--]--><!--]-->前端工程化<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/hhpphdcq/" aria-label="框架"><!--[--><!--[--><!--]--><!--]-->框架<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/r5cjcrbh/" aria-label="Node"><!--[--><!--[--><!--]--><!--]-->Node<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="积累"><span class="title">积累</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="积累"><span class="title">积累</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/emukhg09/" aria-label="必备技能"><!--[--><!--[--><!--]--><!--]-->必备技能<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/vphzbmae/" aria-label="扩展"><!--[--><!--[--><!--]--><!--]-->扩展<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/4d19tfzr/" aria-label="问题收集"><!--[--><!--[--><!--]--><!--]-->问题收集<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/jilei/vue3.html" aria-label="Vue3项目"><!--[--><!--[--><!--]--><!--]-->Vue3项目<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/EFlong2/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="八股文"><span class="title">八股文</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="八股文"><span class="title">八股文</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/6dcud4h6/" aria-label="CSS 必备知识点"><!--[--><!--[--><!--]--><!--]-->CSS 必备知识点<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/EFlong2/article/gl0mmfkz/" aria-label="javascript"><!--[--><!--[--><!--]--><!--]-->javascript<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/7vxts4zb/" aria-label="前端工程化"><!--[--><!--[--><!--]--><!--]-->前端工程化<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/hhpphdcq/" aria-label="框架"><!--[--><!--[--><!--]--><!--]-->框架<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/r5cjcrbh/" aria-label="Node"><!--[--><!--[--><!--]--><!--]-->Node<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="积累"><span class="title">积累</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="积累"><span class="title">积累</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/emukhg09/" aria-label="必备技能"><!--[--><!--[--><!--]--><!--]-->必备技能<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/vphzbmae/" aria-label="扩展"><!--[--><!--[--><!--]--><!--]-->扩展<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/article/4d19tfzr/" aria-label="问题收集"><!--[--><!--[--><!--]--><!--]-->问题收集<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/EFlong2/jilei/vue3.html" aria-label="Vue3项目"><!--[--><!--[--><!--]--><!--]-->Vue3项目<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">javascript <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="javascript-高级" tabindex="-1"><a class="header-anchor" href="#javascript-高级"><span>javascript 高级</span></a></h1><h2 id="专业术语" tabindex="-1"><a class="header-anchor" href="#专业术语"><span>专业术语</span></a></h2><ul><li><p>常量、变量（可读、可写）、数据类型（基础、引用）</p></li><li><p>symbol: 生成一个全局唯一的值，Symbol(1) !== Symbol(1)</p></li><li><p>形参： 函数（这里定义的）、实参：实际输入的值</p></li><li><p>函数四种形态：声明形态、表达式形态、嵌套形态、闭包</p></li><li><p>堆: FIFO、栈: FILO 先进后出(木桶原理)</p></li><li><p>同步、异步、进程、线程</p></li></ul><h3 id="堆-heap" tabindex="-1"><a class="header-anchor" href="#堆-heap"><span>堆 heap</span></a></h3><p><strong>被称为优先队列</strong>，队列中允许的操作是 <strong>先进先出</strong>（FIFO），在队尾插入元素，在队头取出元素。<br> 而堆也是一样，在<strong>堆底插入元素，在堆顶取出元素</strong>。</p><h3 id="栈-stack" tabindex="-1"><a class="header-anchor" href="#栈-stack"><span>栈 stack</span></a></h3><p>又名堆栈，作为一个 <strong>先进后出</strong> 的数据结构。（<strong>注意：这里的堆栈本身就是栈，只是换了个抽象的名字</strong>。）</p><p>它是一种运算受限的线性表。其限制是仅允许在表的一端进行插入和删除运算。这一端被称为栈顶，相对地，把另一端称为栈底。</p><p>向一个栈插入新元素又称作进栈、入栈或压栈，它是把新元素放到栈顶元素的上面，使之成为新的栈顶元素；</p><p>从一个栈删除元素又称作出栈或退栈，它是把栈顶元素删除掉，使其相邻的元素成为新的栈顶元素。</p><h3 id="队列-queue" tabindex="-1"><a class="header-anchor" href="#队列-queue"><span>队列 queue</span></a></h3><ul><li>是一种特殊的线性表，特殊之处在于它只允许在表的前端进行删除操作，在后端进行插入<strong>和栈一样</strong>，是一种操作受限制的线性表。</li><li>采用 先进先出 FIFO ，新元素插入到尾部，读取的时候总是从头部开始。</li></ul><p>（1）<strong>值类型(基本类型)</strong>：数值 (number)、布尔值 (boolean)、string (在赋值传递中会以引用类型的方式来处理)、null、undefined。</p><p>（2）<strong>引用类型</strong>：对象、数组、函数。</p><h2 id="执行上下文" tabindex="-1"><a class="header-anchor" href="#执行上下文"><span>执行上下文</span></a></h2><p>当函数执行时，去创建一个称为「执行上下文( execution contex )」的环境，分为 <strong>创建、执行和回收三个阶段。</strong></p><p><strong>作⽤域是在函数执⾏上下⽂创建时定义好的</strong>，不是函数执⾏时定义的</p><h3 id="创建阶段" tabindex="-1"><a class="header-anchor" href="#创建阶段"><span>创建阶段</span></a></h3><p>是指 <strong>函数被调用但未被执行任何代码时，</strong> 创建了一个拥有 <strong>3 个属性的对象（出现 var 变量提升、函数声明提升）</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">executionContext <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">scopeChain</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 创建作⽤域链（scope chain）</span></span>
<span class="line">  <span class="token literal-property property">variableObject</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 初始化变量、函数、形参</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 指定this</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建阶段： 函数声明比变量声明优先级高</p><h3 id="代码执行阶段" tabindex="-1"><a class="header-anchor" href="#代码执行阶段"><span>代码执行阶段</span></a></h3><p>主要工作:</p><ol><li>分配变量、函数的引用、赋值</li><li>执行代码</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// ⼀段这样的代码</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;xiaowa&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">var</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">demo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建阶段⼤致这样，在这个阶段就出现了【变量提升(Hoisting)】</span></span>
<span class="line">executionContext <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">scopeChain</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">variableObject</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">arguments</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 创建了参数对象</span></span>
<span class="line">      <span class="token number">0</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 创建形参名称，赋值/或创建引⽤拷⻉</span></span>
<span class="line">    <span class="token literal-property property">c</span><span class="token operator">:</span> pointer to <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 有内部函数声明的话，创建引⽤指向函数体</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token comment">// 有内部声明变量a，初始化为undefined</span></span>
<span class="line">    <span class="token literal-property property">getData</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token comment">// 有内部声明变量b，初始化为undefined</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 代码执⾏阶段，在这个阶段主要是赋值并执⾏代码</span></span>
<span class="line">executionContext <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">scopeChain</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">variableObject</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">arguments</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token number">0</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">c</span><span class="token operator">:</span> pointer to <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;xiaowa&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 分配变量，赋值</span></span>
<span class="line">    <span class="token literal-property property">getData</span><span class="token operator">:</span> pointer to <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 分配函数的引⽤，赋值</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行栈-执行上下文栈" tabindex="-1"><a class="header-anchor" href="#执行栈-执行上下文栈"><span>执行栈（执行上下文栈）</span></a></h3><p>由于 JS 是单线程的，所以代码中只有一个【全局执行上下文】，和无数个【函数执行上下文】，共同组成了执行上下文栈（Execution Stack）。</p><p><strong>当一个函数执行时会被压入上下文栈，内容执行完毕后，会被移出执行上下文栈。</strong></p><p>递归函数循环次数太多的时候(超过当前浏览器分配的内存临界值)，会报错 <strong>内存溢出</strong> 什么的，就是因为这个。函数一直没有执行完毕，一直往内存中添加直到临界点报错！</p><h2 id="基础类型和引用类型区别" tabindex="-1"><a class="header-anchor" href="#基础类型和引用类型区别"><span>基础类型和引用类型区别</span></a></h2><h3 id="基础类型" tabindex="-1"><a class="header-anchor" href="#基础类型"><span>基础类型</span></a></h3><p><code>String、Number、Boolean、Null、Undefined、symbol(ES6)</code></p><p><strong>特性：</strong> 基础类型的数据是按值存储的，也就是说，变量中存储的实际上是值本身，而不是指向值的内存地址。因此，基础类型的数据是不可变的，一旦创建就不能被修改。</p><h3 id="引用类型" tabindex="-1"><a class="header-anchor" href="#引用类型"><span>引用类型</span></a></h3><p><code>对象 Object、数组 Array、函数 Function</code></p><p>引用类型的数据是存储在堆内存中的，变量中存储的是指向实际对象在内存中的地址。因此，引用类型的数据是可变的，可以修改对象属性的值或者向数组中添加或删除元素。 <strong>因此赋值过程其实是指向同一个地址，会相互影响。</strong></p><h2 id="函数的四种形态" tabindex="-1"><a class="header-anchor" href="#函数的四种形态"><span>函数的四种形态</span></a></h2><p>只有<strong>声明形态的函数，才具有变量提升的特性</strong>。(所谓<strong>提升</strong>：意思就是代码的执行顺序提升到最前面)</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//函数的声明形态    只有声明形态的函数，才具有提升的特性。</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数的声明形态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//函数的表达式形态 之一</span></span>
<span class="line"><span class="token keyword">let</span> func0 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数的表达式形态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token comment">//函数的表达式形态 之二</span></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//函数的嵌套形态</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">func2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数的嵌套形态&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> <span class="token function-variable function">func3</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;func2嵌套在func1里&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">func3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 函数的闭包形态</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">func4</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;func4&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是以闭包形态存在的函数:&quot;</span> <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//所有的函数都通过一对括号&quot;()&quot;调用</span></span>
<span class="line"><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">func0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">func4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 闭包</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="作用域-scope" tabindex="-1"><a class="header-anchor" href="#作用域-scope"><span>作用域( Scope )</span></a></h2><p>js 中有三种：</p><p><strong>全局作用域、函数作用域</strong>，es6 中又增加了 <strong>块级作用域</strong>。</p><p>作用域最大的用途就是 <strong>隔离变量或函数</strong>，并<strong>控制他们的生命周期</strong>。 <strong>作用域是</strong>在函数执行上下文<strong>创建时定义好的</strong>，<strong>不是</strong>函数执行时定义的。（<strong>执行时根据定义时的关系向外层寻找</strong>）</p><h3 id="作用域链" tabindex="-1"><a class="header-anchor" href="#作用域链"><span>作用域链</span></a></h3><p>当一个<strong>块或函数</strong>嵌套在另一个块或函数中时，就发生了作用域的嵌套。</p><p>如果在<strong>当前作用域无法找到会向上一级作用域寻找，直到找到或抵达全局作用域</strong>，这样的链式关系就是 作用域链( Scope Chain )</p><h2 id="闭包" tabindex="-1"><a class="header-anchor" href="#闭包"><span>闭包</span></a></h2><blockquote><p><strong>函数内层的作用域访问它外层函数作用域里的【参数/变量/函数】时，闭包就产生了</strong></p></blockquote><ul><li>可以读取函数内部的变量</li><li>让这些变量始终保持在内存中，即：<strong>闭包可以使它诞生的环境一直存在</strong>。</li></ul><h3 id="写成闭包形式的好处" tabindex="-1"><a class="header-anchor" href="#写成闭包形式的好处"><span>写成闭包形式的好处</span></a></h3><p>因为闭包只有内部作用域可以访问，这样就可以<strong>实现软件设计上的封装</strong>了。 设计出强大的类库、框架：jQuery、Vue.js</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// ES6之前 类的封装</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> name <span class="token operator">=</span> n<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> name<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string">&quot;我的名字&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">a</span><span class="token operator">:</span> a<span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">b</span><span class="token operator">:</span> b<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> xieN <span class="token operator">=</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token string">&quot;龙哥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xieN<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xieN<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="平时怎么用-应用场景链接" tabindex="-1"><a class="header-anchor" href="#平时怎么用-应用场景链接"><span>平时怎么用，应用场景<a href="https://juejin.im/post/5d50c6ef6fb9a06b1d21358d" target="_blank" rel="noopener noreferrer">链接</a></span></a></h3><p>什么节点循环绑定事件，解决方案 立即执行函数、var =&gt; let</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; i引用了去全局作用域里面的i，当for循环完毕后，i的值为6 6 6 6 6</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用闭包解决</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&gt;&gt; 1 2 3 4 5</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> j <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点"><span>缺点</span></a></h3><p>JS 垃圾回收(GC): 如果对象不再被引用，或者对象互相引用形成孤岛后且没有被孤岛之外的其他对象引用，就会被 JS 引擎的垃圾回收器回收。</p><p><strong>过度使用闭包，会导致内存占用过多，不会被回收，甚至内存泄漏。</strong></p><h2 id="this-的-5-种场景" tabindex="-1"><a class="header-anchor" href="#this-的-5-种场景"><span>this 的 5 种场景</span></a></h2><p><img src="https://s4.ax1x.com/2021/12/15/TpZUhD.png" alt="this5.png"></p><p>注意：this 的值是在执行的时候才能确认，定义的时候不能确认！</p><h3 id="场景区分" tabindex="-1"><a class="header-anchor" href="#场景区分"><span>场景区分</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 1、直接调用</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 直接调用函数 this 指向 window =&gt; this.a = 1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2、对象赋值调用</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">fn</span><span class="token operator">:</span> fn <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this 指向被调用的对象 obj</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3、实例化</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">CreateJsPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 尹华芝</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span> <span class="token comment">// 48</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateJsPerson</span><span class="token punctuation">(</span><span class="token string">&quot;尹华芝&quot;</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this 指向 实例化 对象 p1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4、call、apply 改变 this 指向</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">+</span> c <span class="token operator">+</span> d<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 +3+5+7</span></span>
<span class="line"><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1+3+10+20</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 5、箭头函数 没有 this</span></span>
<span class="line"><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn1&quot;</span><span class="token operator">&gt;</span>箭头函数<span class="token keyword">this</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> btn1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;kobe&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">39</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    btn1<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 指向 箭头函数外层第一个普通函数的 this， obj.getName();</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">obj<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="call、apply、bind-借用方法的理念" tabindex="-1"><a class="header-anchor" href="#call、apply、bind-借用方法的理念"><span>call、apply、bind(借用方法的理念)</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">//func是个函数, 返回func 执行的结果 ；</span></span>
<span class="line"></span>
<span class="line"><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token punctuation">[</span>param1<span class="token punctuation">,</span>param2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 同上</span></span>
<span class="line"></span>
<span class="line"><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">// 返回func的拷贝，并拥有指定的this值和初始参数 ()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>call()、apply()、bind() 都是用来重定义 this 指向！必须是函数才可以调用</strong> &gt; <strong>双 a 记忆法</strong>：<code>apply</code>是以 a 开头，它传给<code>func</code>的参数是类 Array 对象（类数组对象）。</p></blockquote><ul><li><strong>call：<strong>的参数是</strong>直接放进去</strong>的 <code>obj.myFun.call(db,param1,paramN,... )</code></li><li><strong>apply：</strong> 参数都放在一个<strong>数组里面传进去</strong> <code>obj.myFun.apply(db,[param1,param1,...])</code></li><li><strong>bind：<strong>返回是函数,需要自己再执行，它 的</strong>参数和 call</strong>一样</li></ul><p><strong><a href="https://coffe1891.gitbook.io/frontend-hard-mode-interview/1/1.2.4#yi-2-44-ying-yong-chang-jing" target="_blank" rel="noopener noreferrer">它们的应用场景</a></strong> 用 js 代码手写实现： 这也是一个 高频考题</p><h3 id="this-最强总结-一字一句都是重点" tabindex="-1"><a class="header-anchor" href="#this-最强总结-一字一句都是重点"><span>this 最强总结：一字一句都是重点</span></a></h3><ol><li>对于<strong>直接调⽤的函数</strong>来说，<strong>不管函数被放在了什么地⽅</strong>，<strong>this 都是 window</strong></li><li>对于<strong>被别⼈调⽤的函数</strong>来说，<strong>被谁点出来的，this 就是谁</strong></li><li>在构造函数中，类中(函数体中)出现的 this.xxx = xxx 中的 <strong>this 是当前类的⼀个实例</strong></li><li>call、apply 时，this 是第⼀个参数。bind 要优于 call/apply 哦，<strong>call 参数多，apply 参数少</strong></li><li>箭头函数没有⾃⼰的 this，需要看其外层是否有函数，<strong>如果有，外层函数的 this 就是内部箭头函数</strong><strong>的 this，如果没有，则 this 是 window</strong></li></ol><h2 id="面向对象" tabindex="-1"><a class="header-anchor" href="#面向对象"><span>面向对象</span></a></h2><ul><li>类：封装、多态、继承</li><li>构造函数、实例、对象字面量</li><li>命名空间</li><li>内置对象、宿主对象、本地对象 <blockquote><p>首先 JS 中没有类，都是基于原型的。无论是 ES5/ES6 中引入的 class 只是基于原型继承模型的语法糖。</p></blockquote></li></ul><p><img src="https://s4.ax1x.com/2021/12/15/TpZOCF.png" alt="面向对象.png"></p><h3 id="构造函数" tabindex="-1"><a class="header-anchor" href="#构造函数"><span>构造函数</span></a></h3><p>本身就是一个函数，为了规范<strong>一般将首字母大写</strong>，区别在于 使用 <strong>new 生成实例的函数就是构造函数</strong>，直接调用的就是 普通函数。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// ********** 手写 new 的几个步骤 ********** //</span></span>
<span class="line"><span class="token comment">// 1、创建一个新对象，</span></span>
<span class="line"><span class="token comment">// 2、把 构造函数的 prototype 赋值给新对象的 proto,</span></span>
<span class="line"><span class="token comment">// 3、把构造函数的 this 指向新对象并返回结果</span></span>
<span class="line"><span class="token comment">// 4、判断如果结果是对象则 返回 ，否则返回 新对象</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> newobj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  newobj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> resObj <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>newobj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 判断如果结果是对象则 返回 ，否则返回 新对象</span></span>
<span class="line">  <span class="token keyword">return</span> resObj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> resObj <span class="token operator">:</span> newobj<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 测试</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Parsen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;龙哥&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;18&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Parsen</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> parsen <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>Parsen<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="原型和原型链" tabindex="-1"><a class="header-anchor" href="#原型和原型链"><span>原型和原型链</span></a></h3><h4 id="原型模式" tabindex="-1"><a class="header-anchor" href="#原型模式"><span>原型模式</span></a></h4><p>原型是在构造函数中的 <strong>每声明一个函数的时候：</strong> 浏览器会在内存中创建一个对象，对象中新增一个 <code>constructor</code> 属性，浏览器把 <code>constructor</code> 属性指向 构造函数，构造函数.prototype 赋值给对象。</p><p>Javascript 对象从原型继承方法和属性，而<code>Object.prototype</code>在继承链的顶部。Javascript prototype 关键字还可以用于向构造函数添加新值和方法。</p><p><strong>原型链：</strong> 代码读取某个属性的时候，首先在实例中找到了则返回，如果没有找到，则继续在 实例的原型对象(<strong>proto</strong>)中搜索，直到找到为止。还没找到则继续 原型对象的原型对象上找。 直到最后 Object 为止，返回 null</p><h4 id="关系" tabindex="-1"><a class="header-anchor" href="#关系"><span>关系</span></a></h4><ul><li>prototype: 函数的一个属性：是一个对象 {}</li><li><strong>proto</strong>: 对象 Object 的一个属性：对象 {}</li><li>**每个对象实例都有一个 __**<em><strong>proto__</strong></em> ，它指向构造函数的 prototype</li><li><strong>以上关系可以使用 console.log 去测试</strong></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 因为 对象的 __proto__ 保存着该对象构造函数的 prototype 所以</span></span>
<span class="line">t<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Test</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Test</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true： 这样一个链式调用形成 - 原形链</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token comment">// null  原形链顶层为 null</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/************* 原形链 *****************/</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Test</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 给构造函数的原型添加一个 属性b=2</span></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 画一下这个关系链：</span></span>
<span class="line"><span class="token comment">// test:</span></span>
<span class="line"><span class="token comment">// {</span></span>
<span class="line"><span class="token comment">//     a: 1,</span></span>
<span class="line"><span class="token comment">//     __proto__: Test.prototype = {</span></span>
<span class="line"><span class="token comment">//         b: 2,</span></span>
<span class="line"><span class="token comment">//         __proto__: Oject.prototype = {</span></span>
<span class="line"><span class="token comment">//         c:3</span></span>
<span class="line"><span class="token comment">//         没有 __proto__</span></span>
<span class="line"><span class="token comment">//         }</span></span>
<span class="line"><span class="token comment">//     }</span></span>
<span class="line"><span class="token comment">// }</span></span>
<span class="line"><span class="token comment">// 原形链： 沿着__proto__为节点去找构造函数prototype 连起来的一个链条， 一层一层往上寻找 直到 null</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// Test(){}</span></span>
<span class="line">其实 test<span class="token punctuation">.</span>constructor 指向的就是 实例化 test 对象的构造函数</span>
<span class="line">所以：constructor 是可以被赋值修改的，</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/************* 特殊性 *****************/</span></span>
<span class="line">Function、Object：函数 对象</span>
<span class="line">Test<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span></span>
<span class="line">Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token comment">// true  因为函数自己构造了自己</span></span>
<span class="line">Object<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/************* 属性的查找 *****************/</span></span>
<span class="line"><span class="token comment">// test =&gt; {a: 1, b:2}</span></span>
<span class="line">test<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true    查找当前对象上的原型属性</span></span>
<span class="line">test<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span></span>
<span class="line">test<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false    是继承过来的所以没有</span></span>
<span class="line"></span>
<span class="line"><span class="token string">&#39;a&#39;</span> <span class="token keyword">in</span> test <span class="token comment">// true   in: 链上查找</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="class" tabindex="-1"><a class="header-anchor" href="#class"><span>Class</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token doc-comment comment">/************ ES5 定义类 ******************/</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 添加函数</span></span>
<span class="line"><span class="token class-name">User</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showUser</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 使用</span></span>
<span class="line"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;my.yang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">user<span class="token punctuation">.</span><span class="token function">showUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/************ ES6 定义类 ******************/</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 其实就是在 Person 的 prototype 上添加了属性和方法</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;My.Yang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">person<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/******************* 类的实例 ***************************/</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 实例的属性除了 this 定义在本身，其他都是定义在原型上</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;showName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;showName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 与 ES5 一样，类的所有实例共享一个原型对象。</span></span>
<span class="line"><span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;long&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;mmmmm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> a2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 所以不推荐直接通过 __proto__ 添加私有属性和方法，因为 共享的实例都会受到影响</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/****************注意点：********************/</span></span>
<span class="line"><span class="token comment">// 1、类和模块的内部默认使用严格模式</span></span>
<span class="line"><span class="token comment">// 2、不存在变量提升  提前访问会报错 ReferenceError</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 静态方法：static</span></span>
<span class="line"><span class="token comment">// 添加 static 关键字，表示该方法不会被【实例】继承，只能通过类.直接调用，但是可以被 子类继承 extends</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 私有方法和属性</span></span>
<span class="line"><span class="token comment">// 私有方法：通过内部使用 _xxx、_func 的方式来定义</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>创建了一个 名为 User 的函数，该函数将成为类声明的结果</li><li>在 User.prototype 中存储所有方法，例如 showUser ( 跟 ES5 一样把函数存到 prototype 上 )</li><li>类必须使用 new ，否则无法调用类构造函数 报错</li><li>类方法 是不可以枚举的</li></ol><h3 id="继承" tabindex="-1"><a class="header-anchor" href="#继承"><span>继承</span></a></h3><p>Class 使用 <strong>extends</strong>实现继承，比 ES5 通过修改原型链实现继承，要清晰和方便很多。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">ColorPoint</span> <span class="token keyword">extends</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的constructor(x, y)</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的toString()</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意： 子类必须在 constructor 中先调用 super(),否则新建实例就会报错。ReferenceError 主要是 解决 this 问题，需要先把 父类属性和方法加到 this 上，然后再用子类构造函数修改 this 。</p><p>使用 Object.getPrototypeOf() 判断 类是否继承了另一个类 <code>Obkect.getPrototypeOf(Xxxx) === XXX</code></p><p><strong>super 既可以当作函数又可以是对象</strong> 当作函数： super() 代表 父类的构造函数。 =&gt; A.prototype.constructor.call(this)</p><p>当作对象：super 在普通方法中，指向 父类的原型对象 A.prototype；在静态方法中 指向父类。</p><h4 id="_1、原型链继承" tabindex="-1"><a class="header-anchor" href="#_1、原型链继承"><span>1、原型链继承</span></a></h4><p><strong>直接让子类的原型对象 prototype 指向父类实例</strong>，当子类实例找不到对应的属性和方法时，就会往它的原型对象(父类实例上找)，从而实现对父类的属性和方法的继承。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 父类</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;我是小样&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 给父类添加方法</span></span>
<span class="line"><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 子类</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 直接把父类实例赋给 子类的 原型对象</span></span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span> <span class="token comment">// 根据原型链的规则,顺便绑定一下constructor, 这一步不影响继承, 只是在用到constructor时会需要</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">child<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 我是小样</span></span>
<span class="line">child<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 我是小样</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缺点：【<strong>子类相互影响</strong>】 子类实例原型都指向父类实例，因此 某个 子类实例修改了 父类引用方法或函数的时候 会影响所有子类。 <strong>同时无法向父类构造函数传参</strong>。</p><h4 id="_2、构造函数继承" tabindex="-1"><a class="header-anchor" href="#_2、构造函数继承"><span>2、构造函数继承</span></a></h4><p><strong>在子类构造函数中执行 父类构造函数并绑定子类 this</strong>, 使得 父类中的属性能够赋值到子类的 this 上。这样就 避免实例之间共享一个原型实例，又能向父类构造函数传参。 缺点很明显： <strong>继承不了父类原型上的属性和方法</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;参数1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行父类构造方法并绑定子类的this, 使得父类中的属性能够赋到子类的this上</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//测试</span></span>
<span class="line"><span class="token keyword">const</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">child1<span class="token punctuation">.</span>name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&#39;foo&#39;]</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&#39;zhangsan&#39;]</span></span>
<span class="line">child2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错,找不到getName(), 构造函数继承的方式 继承不到父类原型上的属性和方法</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、组合式继承" tabindex="-1"><a class="header-anchor" href="#_3、组合式继承"><span>3、组合式继承</span></a></h4><p>说白了就是 把上面两个整合在一起, prototype、构造函数调用父类 call</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;参数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 改变 Parent this 指向，并带参数</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把父类实例 赋值给 子类原型</span></span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">var</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">child1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;yang&quot;</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// yang</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参数</span></span>
<span class="line">child2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参数</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缺点： 每次创建子类实例都<strong>执行了两次构造函数</strong>【Parent.call() 和 new Parent()】,导致子类创建实例时，原型中会<strong>存在两份相同的属性和方法</strong>，很不优雅。</p><h4 id="_4、寄生式组合继承【终极方案】" tabindex="-1"><a class="header-anchor" href="#_4、寄生式组合继承【终极方案】"><span>4、寄生式组合继承【终极方案】</span></a></h4><p>为了解决 组合式继承 构造函数被执行两次的问题，我们将 <strong>指向父类实例改为指向 拷贝的父类原型</strong>，去掉一次构造函数的执行，并且 不会相互影响。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">主要是把原来的 ，其他都一样。</span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>但是 问题又出来了，<strong>子类原型和父类原型都指向同一个对象，那还是会相互影响</strong>。</p><p>所以：给 父类原型做一个 浅拷贝 <code>Child.prototype = Object.create(Parent.prototype)</code> 到这里 ES5 的所有继承都有了，<strong>babel 对 ES6 继承的转换也是 使用了 寄生组合式继承</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 构造函数继承</span></span>
<span class="line">  <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//原型链继承</span></span>
<span class="line"><span class="token comment">// Child.prototype = new Parent()</span></span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将`指向父类实例`改为`指向父类原型`</span></span>
<span class="line"><span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//测试</span></span>
<span class="line"><span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">child<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&#39;zhangsan&#39;]</span></span>
<span class="line">parent<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错, 找不到getName()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>我们回顾一下实现过程：</p></blockquote><ol><li>一开始最容易想到的是 <strong>原型链继承</strong> ，通过把子类实例的原型指向父类实例来继承父类的属性和方法，但原型链继承的缺陷在于对子类实例继承的引用类型的修改会影响到所有的实例对象以及无法向父类的构造方法传参</li><li>因此我们引入了<strong>构造函数继承</strong>, 通过在子类构造函数中调用父类构造函数并传入子类 this 来获取父类的属性和方法，但构造函数继承也存在缺陷，构造函数继承不能继承到父类原型链上的属性和方法。</li><li>所以我们综合了两种继承的优点，提出了<strong>组合式继承</strong>，但组合式继承也引入了新的问题，它每次创建子类实例都执行了两次父类构造方法，我</li><li>们通过将子类原型指向父类实例改为子类原型指向父类原型的浅拷贝来解决这一问题，也就是最终实现 —— <strong>寄生组合式继承</strong></li></ol><h2 id="深拷贝-和-浅拷贝" tabindex="-1"><a class="header-anchor" href="#深拷贝-和-浅拷贝"><span>深拷贝 和 浅拷贝</span></a></h2><p>浅拷贝只复制指向某个对象的指针，而不复制对象本身，新旧对象还是共享一个内存，相互影响。</p><h3 id="来源于赋值-址" tabindex="-1"><a class="header-anchor" href="#来源于赋值-址"><span>来源于赋值(址)</span></a></h3><ul><li>基本数据类型 <strong>赋值</strong>之后两个变量互不影响</li><li>引用类型(对象、函数、数组) <strong>赋址 ，两个变量具有相同得引用，指向同一个对象，相互影响（所以才出现了 深拷贝和浅拷贝）</strong></li></ul><h3 id="浅拷贝" tabindex="-1"><a class="header-anchor" href="#浅拷贝"><span>浅拷贝</span></a></h3><p>简单来讲，浅拷贝 只解决了 <strong>第一层问题</strong> 基本类型值和引用类型地址</p><ul><li><p>Object.assign() : 如果目标对象只有一层的时候 是深拷贝</p></li><li><p>展开语法 Spread <strong>...</strong></p></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ceshi&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">book</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;You Don&#39;t Know JS&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">price</span><span class="token operator">:</span> <span class="token string">&quot;45&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// {</span></span>
<span class="line"><span class="token comment">//  name: &quot;ceshi&quot;,</span></span>
<span class="line"><span class="token comment">//  book: {title: &quot;You Don&#39;t Know JS&quot;, price: &quot;45&quot;}</span></span>
<span class="line"><span class="token comment">// }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="深拷贝" tabindex="-1"><a class="header-anchor" href="#深拷贝"><span>深拷贝</span></a></h3><p>拷贝所有属性以及指向得动态分配的内存。拷贝前后两个 对象互不影响。</p><h3 id="json-parse-json-stringify-object" tabindex="-1"><a class="header-anchor" href="#json-parse-json-stringify-object"><span>JSON.parse(JSON.stringify(object))</span></a></h3><ul><li><strong>拷贝对象没问题</strong>，但是 <strong>数组有问题</strong>：undefined、symbol 和函数这三种情况，会直接忽略。</li><li>该方法是用<code>JSON.stringify</code>将对象序列化为字符串，然后在用<code>JSON.parse</code>将 json 字符串解析为对象，<strong>解析的时候会自己去构建新的内存地址存放新对象。</strong></li><li><strong>所以 诞生了 lodash.cloneDeep()</strong></li></ul><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><table><thead><tr><th>--</th><th style="text-align:center;">和原数据是否指向同一对象</th><th style="text-align:center;">第一层数据为基本数据类型</th><th style="text-align:center;">原数据中包含子对象</th></tr></thead><tbody><tr><td>赋值</td><td style="text-align:center;">是</td><td style="text-align:center;">改变会使原数据一同改变</td><td style="text-align:center;">改变<strong>会</strong>使原数据一同改变</td></tr><tr><td>浅拷贝</td><td style="text-align:center;">否</td><td style="text-align:center;">改变<strong>不会</strong>使原数据一同改变</td><td style="text-align:center;">改变<strong>会</strong>使原数据一同改变</td></tr><tr><td>深拷贝</td><td style="text-align:center;">否</td><td style="text-align:center;">改变<strong>不会</strong>使原数据一同改变</td><td style="text-align:center;">改变<strong>不会</strong>使原数据一同改变</td></tr></tbody></table><h3 id="如何实现一个深拷贝" tabindex="-1"><a class="header-anchor" href="#如何实现一个深拷贝"><span>如何实现一个深拷贝</span></a></h3><p>思路：<strong>浅拷贝 + 递归</strong>，浅拷贝时 判断属性值是否是对象，是对象就进行递归操作。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">deep</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> result<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> elment <span class="token operator">=</span> source<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">checkType</span><span class="token punctuation">(</span>elment<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;Object&quot;</span> <span class="token operator">||</span> <span class="token function">checkType</span><span class="token punctuation">(</span>elment<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;Array&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deep</span><span class="token punctuation">(</span>elment<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> elment<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> result<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">checkType</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> source <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;error arguments&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;deepClone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> targetObj <span class="token operator">=</span> source<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      targetObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      targetObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> targetObj<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="基本概念" tabindex="-1"><a class="header-anchor" href="#基本概念"><span>基本概念</span></a></h2><h3 id="js-常见错误类型-前三种" tabindex="-1"><a class="header-anchor" href="#js-常见错误类型-前三种"><span>js 常见错误类型 (前三种)</span></a></h3><h4 id="syntaxerror-语法错误" tabindex="-1"><a class="header-anchor" href="#syntaxerror-语法错误"><span>SyntaxError: 语法错误</span></a></h4><ol><li><p>当 JavaScript 解析器在解析代码时发现语法错误，就会抛出语法错误。这种错误通常是由于书写错误、缺少括号、分号、花括号等引起的。</p></li><li><p>给关键字赋值：<code>function = 5 、 var 1a // _Uncaught SyntaxError: Unexpected token_</code></p></li></ol><h4 id="typeerror-类型错误-调用不存在的方法-乱调用" tabindex="-1"><a class="header-anchor" href="#typeerror-类型错误-调用不存在的方法-乱调用"><span>TypeError 类型错误(调用不存在的方法，乱调用)</span></a></h4><p>当 JavaScript 引擎尝试执行无法完成的操作时，会抛出类型错误。比如，试图对一个未定义的变量进行操作、使用一个不存在的对象属性、调用一个非函数的对象等。</p><ol><li>调用不存在的方法 <code>123() 、 var oo = {} oo.run()</code></li><li>new 关键字后接基本类型： <code>var a = new 123</code></li></ol><h4 id="referenceerror-引用错误-这玩意不存在" tabindex="-1"><a class="header-anchor" href="#referenceerror-引用错误-这玩意不存在"><span>ReferenceError 引用错误(这玩意不存在)</span></a></h4><p>当尝试使用一个未定义的变量、函数、对象属性等时，JavaScript 解释器会抛出引用错误。</p><ol><li>调用了不存在的变量</li><li>给一个无法被赋值的对象赋值：console.log(&quot;123&quot;) = 1</li></ol><h3 id="js-检测数据类型方法" tabindex="-1"><a class="header-anchor" href="#js-检测数据类型方法"><span>js 检测数据类型方法</span></a></h3><h4 id="typeof-检测基础类型" tabindex="-1"><a class="header-anchor" href="#typeof-检测基础类型"><span>typeof 检测基础类型</span></a></h4><p>返回一个表示数据类型的字符串。<strong>主要检测基本类型，除了 null</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// symbol</span></span>
<span class="line"><span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function</span></span>
<span class="line"><span class="token keyword">typeof</span> <span class="token keyword">null</span> \ <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token comment">// object</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="instanceof-引用类型" tabindex="-1"><a class="header-anchor" href="#instanceof-引用类型"><span>instanceof 引用类型</span></a></h4><p>语法：object instanceof constructor A instanceof B: <strong>判断 A 是否是 B 的实例</strong> 概念：测试一个对象在其原型链中是否存在一个构造函数的 prototype 属性，但是不能检测 null 和 undefined</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">instanceof</span>  <span class="token class-name">Array</span><span class="token punctuation">;</span>  <span class="token comment">//true</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">instanceof</span>  <span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token comment">//true</span></span>
<span class="line"><span class="token keyword">new</span>  <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">instanceof</span>  <span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token comment">//true</span></span>
<span class="line"><span class="token keyword">new</span>  <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">instanceof</span>  <span class="token class-name">RegExp</span><span class="token comment">//true</span></span>
<span class="line"><span class="token keyword">null</span>  <span class="token keyword">instanceof</span>  <span class="token class-name">Null</span><span class="token comment">//报错</span></span>
<span class="line"><span class="token keyword">undefined</span>  <span class="token keyword">instanceof</span>  <span class="token class-name">undefined</span><span class="token comment">//报错</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="object-protype-tostring-call-强推" tabindex="-1"><a class="header-anchor" href="#object-protype-tostring-call-强推"><span>object.protype.toString().call() 强推</span></a></h4><p>唯一一种获取[[class]]值的方法, 最准确最有效的方式。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Array]&quot;</span></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Object]&quot;</span></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Number]&quot;</span></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Null]&quot;</span></span>
<span class="line"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Undefined]&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数组" tabindex="-1"><a class="header-anchor" href="#数组"><span>数组</span></a></h2><h3 id="强大的数组" tabindex="-1"><a class="header-anchor" href="#强大的数组"><span><a href="https://coffe1891.gitbook.io/frontend-hard-mode-interview/1/1.2.9" target="_blank" rel="noopener noreferrer">强大的数组</a></span></a></h3><p>你所不知道的 forEach、map、filter、find、sort、some 等易错点整理 - 简书 <a href="https://www.jianshu.com/p/3529866b0854" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/3529866b0854</a></p><h3 id="数组扁平化" tabindex="-1"><a class="header-anchor" href="#数组扁平化"><span>数组扁平化</span></a></h3><p><img src="https://s4.ax1x.com/2021/12/15/TpeeKA.png" alt="数组扁平化.png"></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 数组排平 N 种解法</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 最简单方式 利用循环递归</span>
<span class="line"> * 循环遍历 判断当前是否 数组，是的话 递归下一层，拼接到新数组中，否则直接 push 到新数组中</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">flatten1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> elm <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>elm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      result <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flatten1</span><span class="token punctuation">(</span>elm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>elm<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> result<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">flatten1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;flatten1:::&quot;</span><span class="token punctuation">,</span> <span class="token function">flatten1</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 利用 reduce 和 递归</span>
<span class="line"> * arr.reduce(callback, [initialValue])</span>
<span class="line"> * callback （执行数组中每个值的函数，包含四个参数）</span>
<span class="line"></span>
<span class="line">    1、previousValue （上一次调用回调返回的值，或者是提供的初始值（initialValue））</span>
<span class="line">    2、currentValue （数组中当前被处理的元素）</span>
<span class="line">    3、index （当前元素在数组中的索引）</span>
<span class="line">    4、array （调用 reduce 的数组）</span>
<span class="line"></span>
<span class="line">initialValue （作为第一次调用 callback 的第一个参数。）</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">flatten2</span><span class="token punctuation">(</span><span class="token parameter">arry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> arry<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> prev<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flatten2</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span> <span class="token operator">:</span> curr<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">flatten2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;flatten2:::&quot;</span><span class="token punctuation">,</span> <span class="token function">flatten2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 利用 数组 toString 和 split</span>
<span class="line"> * 数组转字符串，然后裁剪</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">flatten3</span><span class="token punctuation">(</span><span class="token parameter">arry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span> arry<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;flatten3:::&quot;</span><span class="token punctuation">,</span> <span class="token function">flatten3</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * 利用 es6 flat</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">flatten4</span><span class="token punctuation">(</span><span class="token parameter">arry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// return arry.flat(2) // 两层</span></span>
<span class="line">  <span class="token keyword">return</span> arry<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无穷层次</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;flatten4:::&quot;</span><span class="token punctuation">,</span> <span class="token function">flatten4</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="数组排序" tabindex="-1"><a class="header-anchor" href="#数组排序"><span>数组排序</span></a></h3><p><img src="https://s4.ax1x.com/2021/12/15/TpeKVP.png" alt="数组排序.png"></p><h2 id="防抖和节流" tabindex="-1"><a class="header-anchor" href="#防抖和节流"><span>防抖和节流</span></a></h2><p><img src="https://cdn.nlark.com/yuque/0/2020/png/407340/1578199652179-0c520fe0-4509-42e9-831a-cb2490a1c461.png#align=left&amp;display=inline&amp;height=1061&amp;margin=[object Object]&amp;originHeight=268&amp;originWidth=1920&amp;size=0&amp;status=done&amp;style=none&amp;width=7604#align=left&amp;display=inline&amp;height=268&amp;margin=[object Object]&amp;originHeight=268&amp;originWidth=1920&amp;status=done&amp;style=none&amp;width=1920" alt="fan"></p><h3 id="防抖-debounce" tabindex="-1"><a class="header-anchor" href="#防抖-debounce"><span>防抖：debounce</span></a></h3><blockquote><p>函数在某段时间内多次触发，只执行最后一次。（会延长触发时间）</p></blockquote><p>实现原理是利用定时器，函数<strong>第一次执行时设置一个定时器</strong>，调用时 发现<strong>已有定时器那么清空之前定时器重新</strong>设置一个<strong>新的定时器</strong>，直到最后一个定时器<strong>到时触发函数执行</strong>。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> awit <span class="token operator">=</span> <span class="token number">50</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...args 剩余参数 数组形式</span></span>
<span class="line">    <span class="token comment">// 存在定时器则清空</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 第一次设置定时器</span></span>
<span class="line">    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> awit<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> ceshiFnDeb <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ceshiFnDeb防抖函数执行了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token number">1000</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> ceshiFnDeb<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="节流-throttle-适合用于-函数被频繁调用的场景-滚动事件" tabindex="-1"><a class="header-anchor" href="#节流-throttle-适合用于-函数被频繁调用的场景-滚动事件"><span>节流：throttle 适合用于 函数被频繁调用的场景(滚动事件)</span></a></h3><p>函数节流指的是 某个函数在 <strong>指定时间内(n 秒)只执行一次</strong>，不管后面函数如何调用请求，<strong>不会延长时间间隔</strong>，n 秒间隔结束后 第一次遇到 新的函数调用会触发执行，以此类推。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 节流 throttle: 固定间隔时间内只调用一次函数</span></span>
<span class="line"><span class="token comment">// 思路1：根据两个时间戳来对比</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> awit <span class="token operator">=</span> <span class="token number">50</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> nowTime <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 当前时间和上次时间做对比，大于间隔时间的话，就可以执行函数fn</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> startTime <span class="token operator">&gt;</span> awit<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 执行完函数之后重置初始时间，等于最后一次触发的时间</span></span>
<span class="line">      startTime <span class="token operator">=</span> nowTime<span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 执行 throttle 函数返回新函数</span></span>
<span class="line"><span class="token keyword">const</span> ceshiFn <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ceshiFn节流函数执行了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 每 10 毫秒执行一次 betterFn 函数，但是只有时间差大于 1000 时才会执行 fn</span></span>
<span class="line"><span class="token function">setInterval</span><span class="token punctuation">(</span>ceshiFn<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>不过市面上比较全的还是 lodash 的防抖节流函数</strong> **</p><h2 id="事件" tabindex="-1"><a class="header-anchor" href="#事件"><span>事件</span></a></h2><h3 id="事件冒泡" tabindex="-1"><a class="header-anchor" href="#事件冒泡"><span>事件冒泡</span></a></h3><blockquote><p>事件开始时由最具体的元素(层次最深的那个触发节点)接收，然后逐级向上传播到文档(window 对象)</p></blockquote><p>事件从内到外传递</p><h3 id="事件捕获" tabindex="-1"><a class="header-anchor" href="#事件捕获"><span>事件捕获</span></a></h3><blockquote><p>此顺序刚好和 事件冒泡相反。 先从文档再到具体元素。</p></blockquote><p>事件从外到内传递</p><h3 id="dom-事件流" tabindex="-1"><a class="header-anchor" href="#dom-事件流"><span>DOM 事件流</span></a></h3><p>三个阶段：</p><ol><li>首先事件捕获，为截获事件提供机会</li><li>实际的目标(具体元素)接受到事件</li><li>冒泡阶段对事件做出响应</li></ol><h2 id="事件对象" tabindex="-1"><a class="header-anchor" href="#事件对象"><span>事件对象</span></a></h2><p><strong>preventDefault</strong>() 取消默认行为，只有 cancelable 属性设置为 true 的事件才可以使用。例如取消 a 标签点击跳转默认行为。</p><p><strong>setopPropagation</strong>() 立即取消进一步事件冒泡或捕获。一般避免触发注册在嵌套元素上注册的事件。</p><h2 id="事件循环-event-loop" tabindex="-1"><a class="header-anchor" href="#事件循环-event-loop"><span>事件循环 Event Loop</span></a></h2><p><a href="https://www.bilibili.com/video/BV1kf4y1U7Ln/?spm_id_from=333.788.videocard.0" target="_blank" rel="noopener noreferrer">我见过最牛逼的讲解</a> 必会版本</p><blockquote><p>Event Loop 是让 JS 做到即使单线程，又绝对不会阻塞的核心机制，是 JS 并发模型的基础。用来协调各种事件、用户交互、脚本执行、UI 渲染、网络请求等的一种机制。</p></blockquote><p>Event Loop 是属于 JavaScript Runtime 的，是由宿主环境（比如浏览器）提供的。</p><h3 id="作用" tabindex="-1"><a class="header-anchor" href="#作用"><span>作用</span></a></h3><p>监控调用栈和任务队列，如果调用栈是空的，他就会取出队列中的第一个 callback 函数，然后将它压入到调用栈中，然后执行它。</p><p><a href="https://github.com/staven630/blog/blob/master/%E6%B7%B1%E7%A9%B6JavaScript/%E5%BC%82%E6%AD%A5/%E5%AE%8F%E4%BB%BB%E5%8A%A1(Macrotask)%E4%B8%8E%E5%BE%AE%E4%BB%BB%E5%8A%A1(Microtask).md" target="_blank" rel="noopener noreferrer">详细文档</a></p><h3 id="宏任务-macrotask" tabindex="-1"><a class="header-anchor" href="#宏任务-macrotask"><span>宏任务 MacroTask</span></a></h3><p>script 全部代码</p><ul><li>浏览器中：I/O、setTimeout、setInterval、requestAnimationFrame</li><li>Node 中： I/O、setTimeout、setInterval、setImmediate</li></ul><h3 id="微任务-microtask" tabindex="-1"><a class="header-anchor" href="#微任务-microtask"><span>微任务 MicroTask</span></a></h3><ul><li>浏览器中：MutationObserver、Promise.then/.catch/.finally</li><li>Node 中： process.nextTick 、Promise.then/.catch/.finally</li></ul><p>new Promise() 在实例化的过程中所执行的代码都是同步执行的，而 <strong>.then、.catch 和 .finally 都是异步执行</strong>的。</p><ol><li>首先执行宏任务队列 <strong>script</strong>，一次只从队列中取一个任务执行，执行完后 去执行微任务队列中的任务；</li><li>微任务队列中所有的任务会被 依次取出来执行，<strong>直到 微任务队列 microtask queue 为空</strong>；</li><li>期间要执行 UI rendering，它的节点是在执行完所有 微任务之后，下一个宏任务之前</li></ol><h2 id="promise-对象-手写" tabindex="-1"><a class="header-anchor" href="#promise-对象-手写"><span>Promise 对象 - 手写</span></a></h2><blockquote><p>本身是一个构造函数，自身有 all、reject、resolve 方法，原型上有 then、catch 方法</p></blockquote><p>promise 的 then 可以接受两个函数，第一个 resolve ，第二个参数为 reject</p><ul><li>resolve：将 promise 的状态 padding 变为 fullfiled 已完成，一般用来进行业务代码处理</li><li>reject：将状态 padding 变为 rejected 已拒绝，一般用来进行拦截报错处理</li><li>then：就是把原来的回调写法分离出来，在异步操作 Async 执行完后，用<strong>链式调用的方式执行回调函数</strong></li><li>all：接受一个数组参数，并行 执行异步操作的能力，在所有异步操作执行完之后才执行回调 then，<strong>all 会把所有异步操作的结果放进一个数组中传给 then。如果其中一个报错，全部到 catch 中，并且未报错的还会执行。</strong></li></ul><h3 id="手写-all" tabindex="-1"><a class="header-anchor" href="#手写-all"><span>手写 all</span></a></h3><p>1、考虑 类型问题 2、考虑 顺序问题 <img src="https://s4.ax1x.com/2021/12/15/TpeDGF.png" alt="手写all.png"></p><h2 id="async-和-await" tabindex="-1"><a class="header-anchor" href="#async-和-await"><span>async 和 await</span></a></h2><p><code>async</code>和<code>await</code>关键字让我们可以用一种更简洁的方式写出基于 <code>[Promise](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)</code>的异步行为，而无需刻意地链式调用<code>promise</code>。 函数返回一个 Promise 对象，如果内部发生异常则会导致返回的 Promise 对象状态变为 <code>reject</code> 状态。抛出的错误会被 <code>catch</code> 方法接收到。</p><h3 id="async-表示函数里有异步操作" tabindex="-1"><a class="header-anchor" href="#async-表示函数里有异步操作"><span>async 表示函数里有异步操作</span></a></h3><p><code>async</code> 函数内部 return 返回的值。会成为 <code>then</code> 方法回调函数的参数。</p><h3 id="await-表示紧跟在后面的表达式需要等待结果-同步" tabindex="-1"><a class="header-anchor" href="#await-表示紧跟在后面的表达式需要等待结果-同步"><span>await 表示紧跟在后面的表达式需要等待结果(同步)</span></a></h3><p><strong>正常情况下，await 命令后面跟着的是 Promise 对象，返回对象的结果，如果不是的话，就直接返回对应的值。</strong></p><h2 id="proxy-与-object-definproperty" tabindex="-1"><a class="header-anchor" href="#proxy-与-object-definproperty"><span>Proxy 与 Object.definproperty()</span></a></h2><h3 id="object-defineproperty" tabindex="-1"><a class="header-anchor" href="#object-defineproperty"><span>Object.defineProperty()</span></a></h3><p>Vue 2.x 利用 Object.defineProperty()，并且把内部解耦为 Observer, Dep, 并使用 Watcher 相连</p><ol><li>不能监听数组的变化，这些方法无法触发 set：push、pop、shift、unshift、splice、sort、</li><li>必须遍历对象的每个属性</li><li>必须深层遍历嵌套的对象</li></ol><h3 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy"><span>Proxy</span></a></h3><p>Vue 在 3.x 版本之后改用 Proxy 进行实现</p><ol><li>针对<strong>整个对象</strong>而不是对象的某个属性</li><li>支持数组</li><li>嵌套支持 是 get 里面递归调用 Proxy 并返回</li></ol><h2 id="模块化编程" tabindex="-1"><a class="header-anchor" href="#模块化编程"><span>模块化编程</span></a></h2><blockquote><p>为了解决两大痛点：</p></blockquote><ol><li>每个模块都要有<strong>自己的 变量作用域</strong>，两个模块之间的<strong>内部变量不会产生冲突</strong>。</li><li>不同模块之间保留相互 导入和导出的方式方法，<strong>模块之间能够相互通信</strong>，模块的执行与加载遵循一定的规范，能保证<strong>彼此之间的依赖关系</strong>。</li></ol><p><strong>模块化开发的 4 个好处：</strong></p><ol><li>避免变量污染，命名冲突</li><li>提高代码复用率</li><li>提高 维护性·</li><li>方便管理依赖关系</li></ol><h3 id="commonjs" tabindex="-1"><a class="header-anchor" href="#commonjs"><span>CommonJS</span></a></h3><blockquote><p>是服务器端模块的规范，Node.js 采用了这个规范。</p></blockquote><p>每个 JS 文件就是一个模块( module )，每个模块内部使用 <code>require</code> 函数和 <code>module.exports</code> 对象来对模块进行导入和导出。</p><h3 id="amd-异步模块定义-专为浏览器设计" tabindex="-1"><a class="header-anchor" href="#amd-异步模块定义-专为浏览器设计"><span>AMD 异步模块定义 - 专为浏览器设计</span></a></h3><blockquote><p>适合 web 开发的模块化规范</p></blockquote><p>模块文件中，我们使用 define 函数定义一个模块，在回调函数中接受定义组件内容。</p><p>这个回调函数接受一个 require 方法，能够在组件内部加载其他模块，这里我们分别传入 模块 ID,就能加载对应文件内的 AMD 模块。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// moduleA.js</span></span>
<span class="line"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;moduleB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// moduleB.js</span></span>
<span class="line"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> m<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// index.js</span></span>
<span class="line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;moduleA&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;moduleB&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">moduleA<span class="token punctuation">,</span> moduleB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>moduleB<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cmd-通用模块定义" tabindex="-1"><a class="header-anchor" href="#cmd-通用模块定义"><span>CMD 通用模块定义</span></a></h3><p>CMD 规范是国内发展出来的，就像 AMD 有个<code>requireJS</code>，CMD 有个浏览器的实现<code>SeaJS</code>，<code>SeaJS</code>要解决的问题和<code>requireJS</code>一样，只不过在模块定义方式和模块加载（可以说运行、解析）时机上有所不同。</p><ul><li>AMD 是依赖关系前置,在定义模块的时候就要声明其依赖的模块;</li><li>CMD 是按需加载依赖就近,只有在用到某个模块的时候再去 require：</li></ul><p><img src="https://s4.ax1x.com/2021/12/15/TpeRVx.png" alt="cmd"></p><h3 id="umd" tabindex="-1"><a class="header-anchor" href="#umd"><span>UMD</span></a></h3><blockquote><p>同时被 CommonJs 规范和 AMD 规范加载的 UMD 模块，一套<strong>同时适用于 node.js 和 web 环境</strong></p></blockquote><p>UMD 先判断是否支持 Node.js 的模块（exports）是否存在，存在则使用 Node.js 模块模式。 在判断是否支持 AMD（define 是否存在），存在则使用 AMD 方式加载模块。</p><h3 id="原生-js-模块化-es6" tabindex="-1"><a class="header-anchor" href="#原生-js-模块化-es6"><span>原生 JS 模块化（ES6）</span></a></h3><blockquote><p>ES6 为导入（importing）导出（exporting）模块带来了很多可能性</p></blockquote><p>与前两者的最大区别在于，<strong>ESModule</strong>是由 JS 解释器实现，而后两者是 在宿主环境中运行时实现。ESModule 导入实际上是在语法层面新增了一个语句，而 AMD 和 ComminJs 加载模块实际上是调用了 require 函数。</p><p><img src="https://s4.ax1x.com/2021/12/15/TpebqI.png" alt="模块化ES6.png"></p><h2 id="正则表达式" tabindex="-1"><a class="header-anchor" href="#正则表达式"><span>正则表达式</span></a></h2><blockquote><p>正则表达式可以从一个基础字符串中根据一定的匹配模式替换文本中的字符串、验证表单、提取字符串等等。</p></blockquote><p>最全正则表达式<a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md" target="_blank" rel="noopener noreferrer">链接</a> 身份证号(15 位、18 位数字)：^\d{15}|\d{18}</p><p>正则表达式主要依赖于元字符。</p><p>| 元字符 | 描述 | | :----: | ------------------------------------------------------------ | --- | | . | 句号匹配任意单个字符除了换行符。 | | [ ] | 字符种类。匹配方括号内的任意字符。 | | [^ ] | 否定的字符种类。匹配除了方括号里的任意字符 | | * | 匹配&gt;=0 个重复的在*号之前的字符。 | | + | 匹配&gt;=1 个重复的+号前的字符。 | | ? | 标记?之前的字符为可选. | | {n,m} | 匹配 num 个大括号之间的字符 (n &lt;= num &lt;= m). | | (xyz) | 字符集，匹配与 xyz 完全相等的字符串. | | | | 或运算符，匹配符号前或后的字符. | | \ | 转义字符,用于匹配一些保留的字符 <code>[ ] ( ) { } . \* + ? ^ $ \ |</code>| | ^ | 从开始行开始匹配. | | $ | 从末端开始匹配. |</p><h2 id="es6-篇请移步-链接" tabindex="-1"><a class="header-anchor" href="#es6-篇请移步-链接"><span>ES6 篇请移步-<a href="https://www.yuque.com/mryang-8oru4/kb/iyxpcu" target="_blank" rel="noopener noreferrer">链接</a></span></a></h2></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2025-04-29T08:25:04.000Z" data-allow-mismatch>2025/4/29 08:25</time></div><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/EFlong2/assets/app-BxErJW_0.js" defer></script>
  </body>
</html>
